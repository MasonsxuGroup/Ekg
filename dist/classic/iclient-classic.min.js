/*!
 * 
 *          iclient-classic.(https://iclient.supermap.io)
 *          CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd
 *          license: Apache-2.0
 *          version: v10.1.0
 *         
 */!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=9)}([function(e,t){e.exports=function(){try{return mapv}catch(e){return{}}}()},function(e,t){function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"===("undefined"==typeof window?"undefined":n(window))&&(r=window)}e.exports=r},function(e,t,n){var r,o,i;o=[t,e],void 0===(i="function"==typeof(r=function(e,t){"use strict";var n={timeout:5e3,jsonpCallback:"callback",jsonpCallbackFunction:null};function r(e){try{delete window[e]}catch(t){window[e]=void 0}}function o(e){var t=document.getElementById(e);t&&document.getElementsByTagName("head")[0].removeChild(t)}t.exports=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=e,s=t.timeout||n.timeout,a=t.jsonpCallback||n.jsonpCallback,u=void 0;return new Promise(function(n,l){var c=t.jsonpCallbackFunction||"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random()),f=a+"_"+c;window[c]=function(e){n({ok:!0,json:function(){return Promise.resolve(e)}}),u&&clearTimeout(u),o(f),r(c)},i+=-1===i.indexOf("?")?"?":"&";var p=document.createElement("script");p.setAttribute("src",""+i+a+"="+c),t.charset&&p.setAttribute("charset",t.charset),p.id=f,document.getElementsByTagName("head")[0].appendChild(p),u=setTimeout(function(){l(new Error("JSONP request to "+e+" timed out")),r(c),o(f),window[c]=function(){r(c)}},s),p.onerror=function(){l(new Error("JSONP request to "+e+" failed")),r(c),o(f),u&&clearTimeout(u)}})}})?r.apply(t,o):r)||(e.exports=i)},function(e,t){e.exports=function(){try{return elasticsearch}catch(e){return{}}}()},function(e,t,n){(function(r,o){var i,s,a;function u(e){"@babel/helpers - typeof";return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}a=function(){"use strict";function e(e){var t=this.constructor;return this.then(function(n){return t.resolve(e()).then(function(){return n})},function(n){return t.resolve(e()).then(function(){return t.reject(n)})})}var t=setTimeout;function n(e){return Boolean(e&&void 0!==e.length)}function i(){}function s(e){if(!(this instanceof s))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],p(e,this)}function a(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,s._immediateFn(function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var r;try{r=n(e._value)}catch(e){return void c(t.promise,e)}l(t.promise,r)}else(1===e._state?l:c)(t.promise,e._value)})):e._deferreds.push(t)}function l(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"===u(t)||"function"==typeof t)){var n=t.then;if(t instanceof s)return e._state=3,e._value=t,void f(e);if("function"==typeof n)return void p((r=n,o=t,function(){r.apply(o,arguments)}),e)}e._state=1,e._value=t,f(e)}catch(t){c(e,t)}var r,o}function c(e,t){e._state=2,e._value=t,f(e)}function f(e){2===e._state&&0===e._deferreds.length&&s._immediateFn(function(){e._handled||s._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)a(e,e._deferreds[t]);e._deferreds=null}function p(e,t){var n=!1;try{e(function(e){n||(n=!0,l(t,e))},function(e){n||(n=!0,c(t,e))})}catch(e){if(n)return;n=!0,c(t,e)}}s.prototype.catch=function(e){return this.then(null,e)},s.prototype.then=function(e,t){var n=new this.constructor(i);return a(this,new function(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}(e,t,n)),n},s.prototype.finally=e,s.all=function(e){return new s(function(t,r){if(!n(e))return r(new TypeError("Promise.all accepts an array"));var o=Array.prototype.slice.call(e);if(0===o.length)return t([]);var i=o.length;function s(e,n){try{if(n&&("object"===u(n)||"function"==typeof n)){var a=n.then;if("function"==typeof a)return void a.call(n,function(t){s(e,t)},r)}o[e]=n,0==--i&&t(o)}catch(e){r(e)}}for(var a=0;a<o.length;a++)s(a,o[a])})},s.resolve=function(e){return e&&"object"===u(e)&&e.constructor===s?e:new s(function(t){t(e)})},s.reject=function(e){return new s(function(t,n){n(e)})},s.race=function(e){return new s(function(t,r){if(!n(e))return r(new TypeError("Promise.race accepts an array"));for(var o=0,i=e.length;o<i;o++)s.resolve(e[o]).then(t,r)})},s._immediateFn="function"==typeof r&&function(e){r(e)}||function(e){t(e,0)},s._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var h=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==o)return o;throw new Error("unable to locate global object")}();"Promise"in h?h.Promise.prototype.finally||(h.Promise.prototype.finally=e):h.Promise=s},"object"===u(t)&&void 0!==e?a():void 0===(s="function"==typeof(i=a)?i.call(t,n,t,e):i)||(e.exports=s)}).call(this,n(5).setImmediate,n(1))},function(e,t,n){(function(e){var r=void 0!==e&&e||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;function i(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new i(o.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new i(o.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(6),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(1))},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,o,i,s,a,u=1,l={},c=!1,f=e.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(e);p=p&&p.setTimeout?p:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick(function(){y(e)})}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((i=new MessageChannel).port1.onmessage=function(e){y(e.data)},r=function(e){i.port2.postMessage(e)}):f&&"onreadystatechange"in f.createElement("script")?(o=f.documentElement,r=function(e){var t=f.createElement("script");t.onreadystatechange=function(){y(e),t.onreadystatechange=null,o.removeChild(t),t=null},o.appendChild(t)}):r=function(e){setTimeout(y,0,e)}:(s="setImmediate$"+Math.random()+"$",a=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(s)&&y(+t.data.slice(s.length))},e.addEventListener?e.addEventListener("message",a,!1):e.attachEvent("onmessage",a),r=function(t){e.postMessage(s+t,"*")}),p.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var o={callback:e,args:t};return l[u]=o,r(u),u++},p.clearImmediate=h}function h(e){delete l[e]}function y(e){if(c)setTimeout(y,0,e);else{var t=l[e];if(t){c=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}(t)}finally{h(e),c=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(1),n(7))},function(e,t){var n,r,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var u,l=[],c=!1,f=-1;function p(){c&&u&&(c=!1,u.length?l=u.concat(l):f=-1,l.length&&h())}function h(){if(!c){var e=a(p);c=!0;for(var t=l.length;t;){for(u=l,l=[];++f<t;)u&&u[f].run();f=-1,t=l.length}u=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function y(e,t){this.fun=e,this.array=t}function d(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new y(e,t)),1!==l.length||c||a(h)},y.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=d,o.addListener=d,o.once=d,o.off=d,o.removeListener=d,o.removeAllListeners=d,o.emit=d,o.prependListener=d,o.prependOnceListener=d,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t,n){!function(t){"use strict";if(t.__disableNativeFetch||!t.fetch){a.prototype.append=function(e,t){e=i(e),t=s(t);var n=this.map[e];n||(n=[],this.map[e]=n),n.push(t)},a.prototype.delete=function(e){delete this.map[i(e)]},a.prototype.get=function(e){var t=this.map[i(e)];return t?t[0]:null},a.prototype.getAll=function(e){return this.map[i(e)]||[]},a.prototype.has=function(e){return this.map.hasOwnProperty(i(e))},a.prototype.set=function(e,t){this.map[i(e)]=[s(t)]},a.prototype.forEach=function(e,t){Object.getOwnPropertyNames(this.map).forEach(function(n){this.map[n].forEach(function(r){e.call(t,r,n,this)},this)},this)};var n={blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t},r=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];p.prototype.clone=function(){return new p(this)},f.call(p.prototype),f.call(y.prototype),y.prototype.clone=function(){return new y(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new a(this.headers),url:this.url})},y.error=function(){var e=new y(null,{status:0,statusText:""});return e.type="error",e};var o=[301,302,303,307,308];y.redirect=function(e,t){if(-1===o.indexOf(t))throw new RangeError("Invalid status code");return new y(null,{status:t,headers:{location:e}})},t.Headers=a,t.Request=p,t.Response=y,t.fetch=function(e,t){return new Promise(function(r,o){var i;i=p.prototype.isPrototypeOf(e)&&!t?e:new p(e,t);var s=new XMLHttpRequest;var u=!1;function l(){if(4===s.readyState){var e=1223===s.status?204:s.status;if(e<100||e>599){if(u)return;return u=!0,void o(new TypeError("Network request failed"))}var t={status:e,statusText:s.statusText,headers:function(e){var t=new a;return e.getAllResponseHeaders().trim().split("\n").forEach(function(e){var n=e.trim().split(":"),r=n.shift().trim(),o=n.join(":").trim();t.append(r,o)}),t}(s),url:"responseURL"in s?s.responseURL:/^X-Request-URL:/m.test(s.getAllResponseHeaders())?s.getResponseHeader("X-Request-URL"):void 0},n="response"in s?s.response:s.responseText;u||(u=!0,r(new y(n,t)))}}s.onreadystatechange=l,s.onload=l,s.onerror=function(){u||(u=!0,o(new TypeError("Network request failed")))},s.open(i.method,i.url,!0);try{"include"===i.credentials&&("withCredentials"in s?s.withCredentials=!0:console&&console.warn&&console.warn("withCredentials is not supported, you can ignore this warning"))}catch(e){console&&console.warn&&console.warn("set withCredentials error:"+e)}"responseType"in s&&n.blob&&(s.responseType="blob"),i.headers.forEach(function(e,t){s.setRequestHeader(t,e)}),s.send(void 0===i._bodyInit?null:i._bodyInit)})},t.fetch.polyfill=!0,e.exports&&(e.exports=t.fetch)}function i(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function s(e){return"string"!=typeof e&&(e=String(e)),e}function a(e){this.map={},e instanceof a?e.forEach(function(e,t){this.append(t,e)},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function u(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function l(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function c(e){var t=new FileReader;return t.readAsArrayBuffer(e),l(t)}function f(){return this.bodyUsed=!1,this._initBody=function(e,t){if(this._bodyInit=e,"string"==typeof e)this._bodyText=e;else if(n.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e,this._options=t;else if(n.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(e){if(!n.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e))throw new Error("unsupported BodyInit type")}else this._bodyText=""},n.blob?(this.blob=function(){var e=u(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(c)},this.text=function(){var e,t,n,r,o,i,s,a=u(this);if(a)return a;if(this._bodyBlob)return e=this._bodyBlob,t=this._options,n=new FileReader,r=t.headers.map["content-type"]?t.headers.map["content-type"].toString():"",o=/charset\=[0-9a-zA-Z\-\_]*;?/,i=e.type.match(o)||r.match(o),s=[e],i&&s.push(i[0].replace(/^charset\=/,"").replace(/;$/,"")),n.readAsText.apply(n,s),l(n);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var e=u(this);return e||Promise.resolve(this._bodyText)},n.formData&&(this.formData=function(){return this.text().then(h)}),this.json=function(){return this.text().then(JSON.parse)},this}function p(e,t){var n,o,i=(t=t||{}).body;if(p.prototype.isPrototypeOf(e)){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new a(e.headers)),this.method=e.method,this.mode=e.mode,i||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=e;if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new a(t.headers)),this.method=(n=t.method||this.method||"GET",o=n.toUpperCase(),r.indexOf(o)>-1?o:n),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i,t)}function h(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(o))}}),t}function y(e,t){t||(t={}),this._initBody(e,t),this.type="default",this.status=t.status,this.ok=this.status>=200&&this.status<300,this.statusText=t.statusText,this.headers=t.headers instanceof a?t.headers:new a(t.headers),this.url=t.url||""}}("undefined"!=typeof self?self:this)},function(e,t,n){"use strict";n.r(t),n.d(t,"ElasticSearch",function(){return b}),n.d(t,"SecurityManager",function(){return P}),n.d(t,"KernelDensityJobParameter",function(){return Q}),n.d(t,"SingleObjectQueryJobsParameter",function(){return z}),n.d(t,"SummaryAttributesJobsParameter",function(){return $}),n.d(t,"SummaryMeshJobParameter",function(){return te}),n.d(t,"SummaryRegionJobParameter",function(){return re}),n.d(t,"OverlayGeoJobParameter",function(){return ie}),n.d(t,"BuffersAnalystJobsParameter",function(){return ae}),n.d(t,"TopologyValidatorJobsParameter",function(){return le}),n.d(t,"OutputSetting",function(){return K}),n.d(t,"MappingParameters",function(){return W}),n.d(t,"GeoCodingParameter",function(){return fe}),n.d(t,"GeoDecodingParameter",function(){return he}),n.d(t,"MapVLayer",function(){return ke}),n.d(t,"MapVRenderer",function(){return _e}),n.d(t,"AddressMatchService",function(){return it}),n.d(t,"ProcessingService",function(){return Cn}),n.d(t,"SuperMap",function(){return ye});
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var r=window.SuperMap=window.SuperMap||{};function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.Components=window.SuperMap.Components||{};
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var i=function(){function e(t,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.x=t?parseFloat(t):0,this.y=n?parseFloat(n):0,this.mode=o,this.CLASS_NAME="SuperMap.Pixel",r.Pixel.Mode={LeftTop:"lefttop",RightTop:"righttop",RightBottom:"rightbottom",LeftBottom:"leftbottom"}}var t,n,i;return t=e,(n=[{key:"toString",value:function(){return"x="+this.x+",y="+this.y}},{key:"clone",value:function(){return new e(this.x,this.y,this.mode)}},{key:"equals",value:function(e){var t=!1;return null!=e&&(t=this.x==e.x&&this.y==e.y||isNaN(this.x)&&isNaN(this.y)&&isNaN(e.x)&&isNaN(e.y)),t}},{key:"distanceTo",value:function(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))}},{key:"add",value:function(t,n){if(null==t||null==n)throw new TypeError("Pixel.add cannot receive null values");return new e(this.x+t,this.y+n)}},{key:"offset",value:function(e){var t=this.clone();return e&&(t=this.add(e.x,e.y)),t}},{key:"destroy",value:function(){this.x=null,this.y=null,this.mode=null}}])&&o(t.prototype,n),i&&o(t,i),e}();r.Pixel=i,
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
r.inherit=function(e,t){var n,o,i,s=function(){};for(s.prototype=t.prototype,e.prototype=new s,n=2,o=arguments.length;n<o;n++)"function"==typeof(i=arguments[n])&&(i=i.prototype),r.Util.extend(e.prototype,i)},r.mixin=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=function e(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=0;r<t.length;r++)s(this,new t[r](n))},o=0;o<t.length;o++){var i=t[o];s(r,i),s(r.prototype,i.prototype),s(r.prototype,new i)}return r;function s(e,t){var n=Object.getOwnPropertyNames(t);Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t)));for(var r=0;r<n.length;r++){var o=n[r];if("constructor"!==o&&"prototype"!==o&&"name"!==o&&"length"!==o){var i=Object.getOwnPropertyDescriptor(t,o);window.ActiveXObject?Object.defineProperty(e,o,i||{}):Object.defineProperty(e,o,i)}}}};r.String={startsWith:function(e,t){return 0==e.indexOf(t)},contains:function(e,t){return-1!=e.indexOf(t)},trim:function(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},camelize:function(e){for(var t=e.split("-"),n=t[0],r=1,o=t.length;r<o;r++){var i=t[r];n+=i.charAt(0).toUpperCase()+i.substring(1)}return n},format:function(e,t,n){t||(t=window);return e.replace(r.String.tokenRegEx,function(e,r){for(var o,i=r.split(/\.+/),s=0;s<i.length;s++)0==s&&(o=t),o=o[i[s]];return"function"==typeof o&&(o=n?o.apply(null,n):o()),void 0===o?"undefined":o})},tokenRegEx:/\$\{([\w.]+?)\}/g,numberRegEx:/^([+-]?)(?=\d|\.\d)\d*(\.\d*)?([Ee]([+-]?\d+))?$/,isNumeric:function(e){return r.String.numberRegEx.test(e)},numericIf:function(e){return r.String.isNumeric(e)?parseFloat(e):e}};var s=r.Number={decimalSeparator:".",thousandsSeparator:",",limitSigDigs:function(e,t){var n=0;return t>0&&(n=parseFloat(e.toPrecision(t))),n},format:function(e,t,n,o){t=void 0!==t?t:0,n=void 0!==n?n:r.Number.thousandsSeparator,o=void 0!==o?o:r.Number.decimalSeparator,null!=t&&(e=parseFloat(e.toFixed(t)));var i=e.toString().split(".");1===i.length&&null==t&&(t=0);var s,a=i[0];if(n)for(var u=/(-?[0-9]+)([0-9]{3})/;u.test(a);)a=a.replace(u,"$1"+n+"$2");if(0==t)s=a;else{var l=i.length>1?i[1]:"0";null!=t&&(l+=new Array(t-l.length+1).join("0")),s=a+o+l}return s}};Number.prototype.limitSigDigs||(Number.prototype.limitSigDigs=function(e){return s.limitSigDigs(this,e)});var a=r.Function={bind:function(e,t){var n=Array.prototype.slice.apply(arguments,[2]);return function(){var r=n.concat(Array.prototype.slice.apply(arguments,[0]));return e.apply(t,r)}},bindAsEventListener:function(e,t){return function(n){return e.call(t,n||window.event)}},False:function(){return!1},True:function(){return!0},Void:function(){}};r.Array={filter:function(e,t,n){var r=[];if(Array.prototype.filter)r=e.filter(t,n);else{var o=e.length;if("function"!=typeof t)throw new TypeError;for(var i=0;i<o;i++)if(i in e){var s=e[i];t.call(n,s,i,e)&&r.push(s)}}return r}};function u(e){"@babel/helpers - typeof";return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var l,c,f,p=r.Util=r.Util||{};r.Util.extend=function(e,t){if(e=e||{},t){for(var n in t){var r=t[n];void 0!==r&&(e[n]=r)}!("function"==typeof window.Event&&t instanceof window.Event)&&t.hasOwnProperty&&t.hasOwnProperty("toString")&&(e.toString=t.toString)}return e},r.Util.copy=function(e,t){var n;if(e=e||{},t)for(var r in e)void 0!==(n=t[r])&&(e[r]=n)},r.Util.reset=function(e){for(var t in e=e||{})if(e.hasOwnProperty(t)){if("object"===u(e[t])&&e[t]instanceof Array){for(var n in e[t])e[t][n].destroy&&e[t][n].destroy();e[t].length=0}else"object"===u(e[t])&&e[t]instanceof Object&&e[t].destroy&&e[t].destroy();e[t]=null}},r.Util.getElement=function(){for(var e=[],t=0,n=arguments.length;t<n;t++){var r=arguments[t];if("string"==typeof r&&(r=document.getElementById(r)),1===arguments.length)return r;e.push(r)}return e},r.Util.isElement=function(e){return!(!e||1!==e.nodeType)},r.Util.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},r.Util.removeItem=function(e,t){for(var n=e.length-1;n>=0;n--)e[n]===t&&e.splice(n,1);return e},r.Util.indexOf=function(e,t){if(null==e)return-1;if("function"==typeof e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},r.Util.modifyDOMElement=function(e,t,n,r,o,i,s,a){t&&(e.id=t),n&&(e.style.left=n.x+"px",e.style.top=n.y+"px"),r&&(e.style.width=r.w+"px",e.style.height=r.h+"px"),o&&(e.style.position=o),i&&(e.style.border=i),s&&(e.style.overflow=s),parseFloat(a)>=0&&parseFloat(a)<1?(e.style.filter="alpha(opacity="+100*a+")",e.style.opacity=a):1===parseFloat(a)&&(e.style.filter="",e.style.opacity="")},r.Util.applyDefaults=function(e,t){e=e||{};var n="function"==typeof window.Event&&t instanceof window.Event;for(var r in t)(void 0===e[r]||!n&&t.hasOwnProperty&&t.hasOwnProperty(r)&&!e.hasOwnProperty(r))&&(e[r]=t[r]);return!n&&t&&t.hasOwnProperty&&t.hasOwnProperty("toString")&&!e.hasOwnProperty("toString")&&(e.toString=t.toString),e},r.Util.getParameterString=function(e){var t=[];for(var n in e){var r,o=e[n];if(null!=o&&"function"!=typeof o)r=Array.isArray(o)||"[object Object]"===o.toString()?encodeURIComponent(JSON.stringify(o)):encodeURIComponent(o),t.push(encodeURIComponent(n)+"="+r)}return t.join("&")},r.Util.urlAppend=function(e,t){var n=e;if(t){0===t.indexOf("?")&&(t=t.substring(1));var r=(e+" ").split(/[?&]/);n+=" "===r.pop()?t:r.length?"&"+t:"?"+t}return n},r.Util.urlPathAppend=function(e,t){var n=e;if(!t)return n;0===t.indexOf("/")&&(t=t.substring(1));var r=e.split("?");return r[0].indexOf("/",r[0].length-1)<0&&(r[0]+="/"),n="".concat(r[0]).concat(t).concat(r.length>1?"?".concat(r[1]):"")},r.Util.DEFAULT_PRECISION=14,r.Util.toFloat=function(e,t){return null==t&&(t=r.Util.DEFAULT_PRECISION),"number"!=typeof e&&(e=parseFloat(e)),0===t?e:parseFloat(e.toPrecision(t))},r.Util.rad=function(e){return e*Math.PI/180},r.Util.getParameters=function(e){e=null===e||void 0===e?window.location.href:e;var t="";if(r.String.contains(e,"?")){var n=e.indexOf("?")+1,o=r.String.contains(e,"#")?e.indexOf("#"):e.length;t=e.substring(n,o)}for(var i={},s=t.split(/[&;]/),a=0,u=s.length;a<u;++a){var l=s[a].split("=");if(l[0]){var c=l[0];try{c=decodeURIComponent(c)}catch(e){c=unescape(c)}var f=(l[1]||"").replace(/\+/g," ");try{f=decodeURIComponent(f)}catch(e){f=unescape(f)}1==(f=f.split(",")).length&&(f=f[0]),i[c]=f}}return i},r.Util.lastSeqID=0,r.Util.createUniqueID=function(e){return null==e&&(e="id_"),r.Util.lastSeqID+=1,e+r.Util.lastSeqID},r.INCHES_PER_UNIT={inches:1,ft:12,mi:63360,m:39.3701,km:39370.1,dd:4374754,yd:36},r.INCHES_PER_UNIT.in=r.INCHES_PER_UNIT.inches,r.INCHES_PER_UNIT.degrees=r.INCHES_PER_UNIT.dd,r.INCHES_PER_UNIT.nmi=1852*r.INCHES_PER_UNIT.m,r.METERS_PER_INCH=.0254000508001016,r.Util.extend(r.INCHES_PER_UNIT,{Inch:r.INCHES_PER_UNIT.inches,Meter:1/r.METERS_PER_INCH,Foot:.3048006096012192/r.METERS_PER_INCH,IFoot:.3048/r.METERS_PER_INCH,ClarkeFoot:.3047972651151/r.METERS_PER_INCH,SearsFoot:.30479947153867626/r.METERS_PER_INCH,GoldCoastFoot:.3047997101815088/r.METERS_PER_INCH,IInch:.0254/r.METERS_PER_INCH,MicroInch:254e-7/r.METERS_PER_INCH,Mil:2.54e-8/r.METERS_PER_INCH,Centimeter:.01/r.METERS_PER_INCH,Kilometer:1e3/r.METERS_PER_INCH,Yard:.9144018288036576/r.METERS_PER_INCH,SearsYard:.914398414616029/r.METERS_PER_INCH,IndianYard:.9143985307444408/r.METERS_PER_INCH,IndianYd37:.91439523/r.METERS_PER_INCH,IndianYd62:.9143988/r.METERS_PER_INCH,IndianYd75:.9143985/r.METERS_PER_INCH,IndianFoot:.30479951/r.METERS_PER_INCH,IndianFt37:.30479841/r.METERS_PER_INCH,IndianFt62:.3047996/r.METERS_PER_INCH,IndianFt75:.3047995/r.METERS_PER_INCH,Mile:1609.3472186944373/r.METERS_PER_INCH,IYard:.9144/r.METERS_PER_INCH,IMile:1609.344/r.METERS_PER_INCH,NautM:1852/r.METERS_PER_INCH,"Lat-66":110943.31648893273/r.METERS_PER_INCH,"Lat-83":110946.25736872235/r.METERS_PER_INCH,Decimeter:.1/r.METERS_PER_INCH,Millimeter:.001/r.METERS_PER_INCH,Dekameter:10/r.METERS_PER_INCH,Decameter:10/r.METERS_PER_INCH,Hectometer:100/r.METERS_PER_INCH,GermanMeter:1.0000135965/r.METERS_PER_INCH,CaGrid:.999738/r.METERS_PER_INCH,ClarkeChain:20.1166194976/r.METERS_PER_INCH,GunterChain:20.11684023368047/r.METERS_PER_INCH,BenoitChain:20.116782494375872/r.METERS_PER_INCH,SearsChain:20.11676512155/r.METERS_PER_INCH,ClarkeLink:.201166194976/r.METERS_PER_INCH,GunterLink:.2011684023368047/r.METERS_PER_INCH,BenoitLink:.20116782494375873/r.METERS_PER_INCH,SearsLink:.2011676512155/r.METERS_PER_INCH,Rod:5.02921005842012/r.METERS_PER_INCH,IntnlChain:20.1168/r.METERS_PER_INCH,IntnlLink:.201168/r.METERS_PER_INCH,Perch:5.02921005842012/r.METERS_PER_INCH,Pole:5.02921005842012/r.METERS_PER_INCH,Furlong:201.1684023368046/r.METERS_PER_INCH,Rood:3.778266898/r.METERS_PER_INCH,CapeFoot:.3047972615/r.METERS_PER_INCH,Brealey:375/r.METERS_PER_INCH,ModAmFt:.304812252984506/r.METERS_PER_INCH,Fathom:1.8288/r.METERS_PER_INCH,"NautM-UK":1853.184/r.METERS_PER_INCH,"50kilometers":5e4/r.METERS_PER_INCH,"150kilometers":15e4/r.METERS_PER_INCH}),r.Util.extend(r.INCHES_PER_UNIT,{mm:r.INCHES_PER_UNIT.Meter/1e3,cm:r.INCHES_PER_UNIT.Meter/100,dm:100*r.INCHES_PER_UNIT.Meter,km:1e3*r.INCHES_PER_UNIT.Meter,kmi:r.INCHES_PER_UNIT.nmi,fath:r.INCHES_PER_UNIT.Fathom,ch:r.INCHES_PER_UNIT.IntnlChain,link:r.INCHES_PER_UNIT.IntnlLink,"us-in":r.INCHES_PER_UNIT.inches,"us-ft":r.INCHES_PER_UNIT.Foot,"us-yd":r.INCHES_PER_UNIT.Yard,"us-ch":r.INCHES_PER_UNIT.GunterChain,"us-mi":r.INCHES_PER_UNIT.Mile,"ind-yd":r.INCHES_PER_UNIT.IndianYd37,"ind-ft":r.INCHES_PER_UNIT.IndianFt37,"ind-ch":20.11669506/r.METERS_PER_INCH}),r.DOTS_PER_INCH=96,r.Util.normalizeScale=function(e){return e>1?1/e:e},r.Util.getResolutionFromScale=function(e,t){var n;e&&(null==t&&(t="degrees"),n=1/(r.Util.normalizeScale(e)*r.INCHES_PER_UNIT[t]*r.DOTS_PER_INCH));return n},r.Util.getScaleFromResolution=function(e,t){return null==t&&(t="degrees"),e*r.INCHES_PER_UNIT[t]*r.DOTS_PER_INCH},r.IS_GECKO=-1===(l=navigator.userAgent.toLowerCase()).indexOf("webkit")&&-1!==l.indexOf("gecko"),r.Browser=function(){var e,t="",n="",r="pc",o=navigator.userAgent.toLowerCase();return o.indexOf("msie")>-1||o.indexOf("trident")>-1&&o.indexOf("rv")>-1?(t="msie",e=o.match(/msie ([\d.]+)/)||o.match(/rv:([\d.]+)/)):o.indexOf("chrome")>-1?(t="chrome",e=o.match(/chrome\/([\d.]+)/)):o.indexOf("firefox")>-1?(t="firefox",e=o.match(/firefox\/([\d.]+)/)):o.indexOf("opera")>-1?(t="opera",e=o.match(/version\/([\d.]+)/)):o.indexOf("safari")>-1&&(t="safari",e=o.match(/version\/([\d.]+)/)),n=e?e[1]:"",o.indexOf("ipad")>-1||o.indexOf("ipod")>-1||o.indexOf("iphone")>-1?r="apple":o.indexOf("android")>-1&&(n=(e=o.match(/version\/([\d.]+)/))?e[1]:"",r="android"),{name:t,version:n,device:r}}(),r.Util.getBrowser=function(){return r.Browser},r.Util.isSupportCanvas=(c=!0,f=r.Util.getBrowser(),document.createElement("canvas").getContext?("firefox"===f.name&&parseFloat(f.version)<5&&(c=!1),"safari"===f.name&&parseFloat(f.version)<4&&(c=!1),"opera"===f.name&&parseFloat(f.version)<10&&(c=!1),"msie"===f.name&&parseFloat(f.version)<9&&(c=!1)):c=!1,c),r.Util.supportCanvas=function(){return r.Util.isSupportCanvas},r.INCHES_PER_UNIT.degree=r.INCHES_PER_UNIT.dd,r.INCHES_PER_UNIT.meter=r.INCHES_PER_UNIT.m,r.INCHES_PER_UNIT.foot=r.INCHES_PER_UNIT.ft,r.INCHES_PER_UNIT.inch=r.INCHES_PER_UNIT.inches,r.INCHES_PER_UNIT.mile=r.INCHES_PER_UNIT.mi,r.INCHES_PER_UNIT.kilometer=r.INCHES_PER_UNIT.km,r.INCHES_PER_UNIT.yard=r.INCHES_PER_UNIT.yd,r.Util.isInTheSameDomain=function(e){if(!e)return!0;var t=e.indexOf("//"),n=document.location.toString(),r=n.indexOf("//");if(-1===t)return!0;var o,i=o=e.substring(0,t),s=n.substring(r+2);r=s.indexOf("/");var a=s.indexOf(":"),u=s.substring(0,r),l=document.location.protocol;if(-1!==a||(u+=":"+("http:"===l.toLowerCase()?80:443)),l.toLowerCase()!==i.toLowerCase())return!1;var c=(i=e.substring(t+2)).indexOf(":");t=i.indexOf("/");var f,p=i.substring(0,t);return-1!==c?f=i.substring(0,c):(f=i.substring(0,t),p+=":"+("http:"===o.toLowerCase()?80:443)),f===document.domain&&p===u},r.Util.calculateDpi=function(e,t,n,r,o){if(e&&t&&n){var i,s=e.getWidth(),a=e.getHeight(),u=t.w,l=t.h;if(o=o||6378137,"degree"===(r=r||"degrees").toLowerCase()||"degrees"===r.toLowerCase()||"dd"===r.toLowerCase()){var c=s/u,f=a/l;i=254/(c>f?c:f)/n/(2*Math.PI*o/360)/1e4}else{i=254/(s/u)/n/1e4}return i}},r.Util.toJSON=function(e){var t=e;if(null==t)return null;switch(t.constructor){case String:return t=(t=(t=(t=(t=(t=(t='"'+t.replace(/(["\\])/g,"\\$1")+'"').replace(/\n/g,"\\n")).replace(/\r/g,"\\r")).replace("<","&lt;")).replace(">","&gt;")).replace(/%/g,"%25")).replace(/&/g,"%26");case Array:for(var n=[],o=0,i=t.length;o<i;o++)n.push(r.Util.toJSON(t[o]));return"["+n.join(",")+"]";case Number:return isFinite(t)?String(t):null;case Boolean:return String(t);case Date:return"{'__type':\"System.DateTime\",'Year':"+t.getFullYear()+",'Month':"+(t.getMonth()+1)+",'Day':"+t.getDate()+",'Hour':"+t.getHours()+",'Minute':"+t.getMinutes()+",'Second':"+t.getSeconds()+",'Millisecond':"+t.getMilliseconds()+",'TimezoneOffset':"+t.getTimezoneOffset()+"}";default:if(null!=t.toJSON&&"function"==typeof t.toJSON)return t.toJSON();if("object"===u(t)){if(t.length){for(var s=[],a=0,l=t.length;a<l;a++)s.push(r.Util.toJSON(t[a]));return"["+s.join(",")+"]"}var c=[];for(var f in t)"function"!=typeof t[f]&&"CLASS_NAME"!==f&&"parent"!==f&&c.push("'"+f+"':"+r.Util.toJSON(t[f]));return c.length>0?"{"+c.join(",")+"}":"{}"}return t.toString()}},r.Util.getResolutionFromScaleDpi=function(e,t,n,o){return o=o||6378137,n=n||"",e>0&&t>0?(e=r.Util.normalizeScale(e),"degree"===n.toLowerCase()||"degrees"===n.toLowerCase()||"dd"===n.toLowerCase()?254/t/e/(2*Math.PI*o/360)/1e4:254/t/e/1e4):-1},r.Util.getScaleFromResolutionDpi=function(e,t,n,r){return r=r||6378137,n=n||"",e>0&&t>0?"degree"===n.toLowerCase()||"degrees"===n.toLowerCase()||"dd"===n.toLowerCase()?254/t/e/(2*Math.PI*r/360)/1e4:254/t/e/1e4:-1},r.Util.transformResult=function(e){return e.responseText&&"string"==typeof e.responseText&&(e=JSON.parse(e.responseText)),e},r.Util.copyAttributes=function(e,t){if(e=e||{},t)for(var n in t){var r=t[n];void 0!==r&&"CLASS_NAME"!==n&&"function"!=typeof r&&(e[n]=r)}return e},r.Util.copyAttributesWithClip=function(e,t,n){if(e=e||{},t)for(var r in t){var o=!1;if(n&&n.length)for(var i=0,s=n.length;i<s;i++)if(r===n[i]){o=!0;break}if(!0!==o){var a=t[r];void 0!==a&&"CLASS_NAME"!==r&&"function"!=typeof a&&(e[r]=a)}}return e},r.Util.cloneObject=function(e){if(null===e||"object"!==u(e))return e;if(e instanceof Date){var t=new Date;return t.setTime(e.getTime()),t}if(e instanceof Array)return e.slice(0);if(e instanceof Object){var n={};for(var o in e)e.hasOwnProperty(o)&&(n[o]=r.Util.cloneObject(e[o]));return n}throw new Error("Unable to copy obj! Its type isn't supported.")},r.Util.lineIntersection=function(e,t,n,o){var i,s,a=null,u=(o.x-n.x)*(e.y-n.y)-(o.y-n.y)*(e.x-n.x),l=(t.x-e.x)*(e.y-n.y)-(t.y-e.y)*(e.x-n.x),c=(o.y-n.y)*(t.x-e.x)-(o.x-n.x)*(t.y-e.y);if(0!=c)s=l/c,a=(i=u/c)>=0&&s<=1&&i<=1&&s>=0?new r.Geometry.Point(e.x+i*(t.x-e.x),e.y+i*(t.y-e.y)):"No Intersection";else if(0==u&&0==l){var f=Math.max(e.y,t.y),p=Math.min(e.y,t.y),h=Math.max(e.x,t.x),y=Math.min(e.x,t.x);a=(n.y>=p&&n.y<=f||o.y>=p&&o.y<=f)&&n.x>=y&&n.x<=h||o.x>=y&&o.x<=h?"Coincident":"Parallel"}else a="Parallel";return a},r.Util.getTextBounds=function(e,t,n){document.body.appendChild(n),n.style.width="auto",n.style.height="auto",e.fontSize&&(n.style.fontSize=e.fontSize),e.fontFamily&&(n.style.fontFamily=e.fontFamily),e.fontWeight&&(n.style.fontWeight=e.fontWeight),n.style.position="relative",n.style.visibility="hidden",n.style.display="inline-block",n.innerHTML=t;var r=n.clientWidth,o=n.clientHeight;return document.body.removeChild(n),{textWidth:r,textHeight:o}};
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var h=r.Event={observers:!1,KEY_SPACE:32,KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,element:function(e){return e.target||e.srcElement},isSingleTouch:function(e){return e.touches&&1===e.touches.length},isMultiTouch:function(e){return e.touches&&e.touches.length>1},isLeftClick:function(e){return e.which&&1===e.which||e.button&&1===e.button},isRightClick:function(e){return e.which&&3===e.which||e.button&&2===e.button},stop:function(e,t){t||(e.preventDefault?e.preventDefault():e.returnValue=!1),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},findElement:function(e,t){for(var n=r.Event.element(e);n.parentNode&&(!n.tagName||n.tagName.toUpperCase()!=t.toUpperCase());)n=n.parentNode;return n},observe:function(e,t,n,r){var o=p.getElement(e);if(r=r||!1,"keypress"===t&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||o.attachEvent)&&(t="keydown"),this.observers||(this.observers={}),!o._eventCacheID){var i="eventCacheID_";o.id&&(i=o.id+"_"+i),o._eventCacheID=p.createUniqueID(i)}var s=o._eventCacheID;this.observers[s]||(this.observers[s]=[]),this.observers[s].push({element:o,name:t,observer:n,useCapture:r}),o.addEventListener?"mousewheel"===t?o.addEventListener(t,n,{useCapture:r,passive:!1}):o.addEventListener(t,n,r):o.attachEvent&&o.attachEvent("on"+t,n)},stopObservingElement:function(e){var t=p.getElement(e)._eventCacheID;this._removeElementObservers(r.Event.observers[t])},_removeElementObservers:function(e){if(e)for(var t=e.length-1;t>=0;t--){var n=e[t],o=new Array(n.element,n.name,n.observer,n.useCapture);r.Event.stopObserving.apply(this,o)}},stopObserving:function(e,t,n,o){o=o||!1;var i=p.getElement(e),s=i._eventCacheID;"keypress"===t&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||i.detachEvent)&&(t="keydown");var a=!1,u=r.Event.observers[s];if(u)for(var l=0;!a&&l<u.length;){var c=u[l];if(c.name===t&&c.observer===n&&c.useCapture===o){u.splice(l,1),0==u.length&&delete r.Event.observers[s],a=!0;break}l++}return a&&(i.removeEventListener?i.removeEventListener(t,n,o):i&&i.detachEvent&&i.detachEvent("on"+t,n)),a},unloadCache:function(){if(r.Event&&r.Event.observers){for(var e in r.Event.observers){var t=r.Event.observers[e];r.Event._removeElementObservers.apply(this,[t])}r.Event.observers=!1}},CLASS_NAME:"SuperMap.Event"};function y(e){"@babel/helpers - typeof";return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.Event=h,r.Event.observe(window,"unload",r.Event.unloadCache,!1);
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var v=function(){function e(t,n,r,o,i){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.BROWSER_EVENTS=["mouseover","mouseout","mousedown","mouseup","mousemove","click","dblclick","rightclick","dblrightclick","resize","focus","blur","touchstart","touchmove","touchend","keydown","MSPointerDown","MSPointerUp","pointerdown","pointerup","MSGestureStart","MSGestureChange","MSGestureEnd","contextmenu"],this.listeners={},this.object=t,this.element=null,this.eventTypes=[],this.eventHandler=null,this.fallThrough=o,this.includeXY=!1,this.extensions={},this.extensionCount={},this.clearMouseListener=null,p.extend(this,i),null!=r)for(var s=0,a=r.length;s<a;s++)this.addEventType(r[s]);null!=n&&this.attachToElement(n),this.CLASS_NAME="SuperMap.Events"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){for(var e in this.extensions)"boolean"!=typeof this.extensions[e]&&this.extensions[e].destroy();this.extensions=null,this.element&&(h.stopObservingElement(this.element),this.element.hasScrollEvent&&h.stopObserving(window,"scroll",this.clearMouseListener)),this.element=null,this.listeners=null,this.object=null,this.eventTypes=null,this.fallThrough=null,this.eventHandler=null}},{key:"addEventType",value:function(e){this.listeners[e]||(this.eventTypes.push(e),this.listeners[e]=[])}},{key:"attachToElement",value:function(e){this.element?h.stopObservingElement(this.element):(this.eventHandler=a.bindAsEventListener(this.handleBrowserEvent,this),this.clearMouseListener=a.bind(this.clearMouseCache,this)),this.element=e;for(var t=0,n=this.BROWSER_EVENTS.length;t<n;t++){var r=this.BROWSER_EVENTS[t];this.addEventType(r),h.observe(e,r,this.eventHandler)}h.observe(e,"dragstart",h.stop)}},{key:"on",value:function(e){for(var t in e)"scope"!==t&&e.hasOwnProperty(t)&&this.register(t,e.scope,e[t])}},{key:"register",value:function(t,n,r,o){if(t in e&&!this.extensions[t]&&(this.extensions[t]=new e[t](this)),null!=r&&-1!==p.indexOf(this.eventTypes,t)){null==n&&(n=this.object);var i=this.listeners[t];i||(i=[],this.listeners[t]=i,this.extensionCount[t]=0);var s={obj:n,func:r};o?(i.splice(this.extensionCount[t],0,s),"object"===y(o)&&o.extension&&this.extensionCount[t]++):i.push(s)}}},{key:"registerPriority",value:function(e,t,n){this.register(e,t,n,!0)}},{key:"un",value:function(e){for(var t in e)"scope"!==t&&e.hasOwnProperty(t)&&this.unregister(t,e.scope,e[t])}},{key:"unregister",value:function(e,t,n){null==t&&(t=this.object);var r=this.listeners[e];if(null!=r)for(var o=0,i=r.length;o<i;o++)if(r[o].obj===t&&r[o].func===n){r.splice(o,1);break}}},{key:"remove",value:function(e){null!=this.listeners[e]&&(this.listeners[e]=[])}},{key:"triggerEvent",value:function(e,t){var n=this.listeners[e];if(n&&0!=n.length){var r;null==t&&(t={}),t.object=this.object,t.element=this.element,t.type||(t.type=e);for(var o=0,i=(n=n.slice()).length;o<i;o++){var s=n[o];if(void 0!=(r=s.func.apply(s.obj,[t]))&&!1===r)break}return this.fallThrough||h.stop(t,!0),r}}},{key:"handleBrowserEvent",value:function(e){var t=e.type,n=this.listeners[t];if(n&&0!=n.length){var r=e.touches;if(r&&r[0]){for(var o,i=0,s=0,a=r.length,u=0;u<a;++u)i+=(o=r[u]).clientX,s+=o.clientY;e.clientX=i/a,e.clientY=s/a}this.includeXY&&(e.xy=this.getMousePosition(e)),this.triggerEvent(t,e)}}},{key:"clearMouseCache",value:function(){this.element.scrolls=null,this.element.lefttop=null;var e=document.body;e&&(0==e.scrollTop&&0==e.scrollLeft||!navigator.userAgent.match(/iPhone/i))&&(this.element.offsets=null)}},{key:"getMousePosition",value:function(e){if(this.includeXY?this.element.hasScrollEvent||(h.observe(window,"scroll",this.clearMouseListener),this.element.hasScrollEvent=!0):this.clearMouseCache(),!this.element.scrolls){var t=p.getViewportElement();this.element.scrolls=[t.scrollLeft,t.scrollTop]}return this.element.lefttop||(this.element.lefttop=[document.documentElement.clientLeft||0,document.documentElement.clientTop||0]),this.element.offsets||(this.element.offsets=p.pagePosition(this.element)),new i(e.clientX+this.element.scrolls[0]-this.element.offsets[0]-this.element.lefttop[0],e.clientY+this.element.scrolls[1]-this.element.offsets[1]-this.element.lefttop[1])}}])&&d(t.prototype,n),r&&d(t,r),e}();r.Events=v,r.Events.prototype.BROWSER_EVENTS=["mouseover","mouseout","mousedown","mouseup","mousemove","click","dblclick","rightclick","dblrightclick","resize","focus","blur","touchstart","touchmove","touchend","keydown","MSPointerDown","MSPointerUp","pointerdown","pointerup","MSGestureStart","MSGestureChange","MSGestureEnd","contextmenu"];var m=n(3),E=n.n(m);function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var b=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n=n||{},this.url=t,this.client=new E.a.Client({host:this.url}),this.change=null,this.openGeoFence=!1,this.outOfGeoFence=null,this.geoFence=null,this.EVENT_TYPES=["change","error","outOfGeoFence"],this.events=new v(this,null,this.EVENT_TYPES),this.eventListeners=null,p.extend(this,n),this.eventListeners instanceof Object&&this.events.on(this.eventListeners)}var t,n,r;return t=e,(n=[{key:"setGeoFence",value:function(e){this.geoFence=e}},{key:"bulk",value:function(e,t){return this.client.bulk(e,t)}},{key:"clearScroll",value:function(e,t){return this.client.clearScroll(e,t)}},{key:"count",value:function(e,t){return this.client.count(e,t)}},{key:"create",value:function(e,t){return this.client.create(e,t)}},{key:"delete",value:function(e,t){return this.client.delete(e,t)}},{key:"deleteByQuery",value:function(e,t){return this.client.deleteByQuery(e,t)}},{key:"deleteScript",value:function(e,t){return this.client.deleteScript(e,t)}},{key:"deleteTemplate",value:function(e,t){return this.client.deleteTemplate(e,t)}},{key:"exists",value:function(e,t){return this.client.exists(e,t)}},{key:"existsSource",value:function(e,t){return this.client.existsSource(e,t)}},{key:"explain",value:function(e,t){return this.client.explain(e,t)}},{key:"fieldCaps",value:function(e,t){return this.client.fieldCaps(e,t)}},{key:"get",value:function(e,t){return this.client.get(e,t)}},{key:"getScript",value:function(e,t){return this.client.getScript(e,t)}},{key:"getSource",value:function(e,t){return this.client.getSource(e,t)}},{key:"getTemplate",value:function(e,t){return this.client.getTemplate(e,t)}},{key:"index",value:function(e,t){return this.client.index(e,t)}},{key:"info",value:function(e,t){return this.client.info(e,t)}},{key:"mget",value:function(e,t){return this.client.mget(e,t)}},{key:"msearch",value:function(e,t){var n=this;return n.client.msearch(e).then(function(e){return n._update(e.responses,t),e},function(e){return t(e),n.events.triggerEvent("error",{error:e}),e})}},{key:"msearchTemplate",value:function(e,t){return this.client.msearchTemplate(e,t)}},{key:"mtermvectors",value:function(e,t){return this.client.mtermvectors(e,t)}},{key:"ping",value:function(e,t){return this.client.ping(e,t)}},{key:"putScript",value:function(e,t){return this.client.putScript(e,t)}},{key:"putTemplate",value:function(e,t){return this.client.putTemplate(e,t)}},{key:"reindex",value:function(e,t){return this.client.reindex(e,t)}},{key:"reindexRessrottle",value:function(e,t){return this.client.reindexRessrottle(e,t)}},{key:"renderSearchTemplate",value:function(e,t){return this.client.renderSearchTemplate(e,t)}},{key:"scroll",value:function(e,t){return this.client.scroll(e,t)}},{key:"search",value:function(e,t){var n=this;return n.client.search(e).then(function(e){return n._update(e.responses,t),e},function(e){return t(e),n.events.triggerEvent("error",{error:e}),e})}},{key:"searchShards",value:function(e,t){return this.client.searchShards(e,t)}},{key:"searchTemplate",value:function(e,t){return this.client.searchTemplate(e,t)}},{key:"suggest",value:function(e,t){return this.client.suggest(e,t)}},{key:"termvectors",value:function(e,t){return this.client.termvectors(e,t)}},{key:"update",value:function(e,t){return this.client.update(e,t)}},{key:"updateByQuery",value:function(e,t){return this.client.updateByQuery(e,t)}},{key:"_update",value:function(e,t){var n=this;e&&(n.data=e,n.openGeoFence&&n.geoFence&&n._validateDatas(e),n.events.triggerEvent("change",{data:n.data}),n.change?n.change&&n.change(e):t&&t(void 0,{responses:e}))}},{key:"_validateDatas",value:function(e){if(e){e instanceof Array||(e=[e]);var t,n=e.length;for(t=0;t<n;t++)this._validateData(e[t])}}},{key:"_validateData",value:function(e){var t=this;e.hits.hits.map(function(n){var r=n._source,o=t._getMeterPerMapUnit(t.geoFence.unit),i=t.geoFence.center[0]*o,s=t.geoFence.center[1]*o,a=r.x*o,u=r.y*o;return t._distance(a,u,i,s)>t.geoFence.radius&&(t.outOfGeoFence&&t.outOfGeoFence(e),t.events.triggerEvent("outOfGeoFence",{data:e})),n})}},{key:"_distance",value:function(e,t,n,r){return Math.sqrt((e-n)*(e-n)+(t-r)*(t-r))}},{key:"_getMeterPerMapUnit",value:function(e){var t;return"meter"===e?t=1:"degree"===e&&(t=2*Math.PI*6378137/360),t}}])&&g(t.prototype,n),r&&g(t,r),e}();r.ElasticSearch=b;n(4),n(8);var S=n(2),T=n.n(S),O=window.fetch,R=(r.setCORS=function(e){r.CORS=e},r.isCORS=function(){return void 0!=r.CORS?r.CORS:window.XMLHttpRequest&&"withCredentials"in new window.XMLHttpRequest}),_=(r.setRequestTimeout=function(e){return r.RequestTimeout=e},r.getRequestTimeout=function(){return r.RequestTimeout||45e3}),I=r.FetchRequest={commit:function(e,t,n,r){switch(e=e?e.toUpperCase():e){case"GET":return this.get(t,n,r);case"POST":return this.post(t,n,r);case"PUT":return this.put(t,n,r);case"DELETE":return this.delete(t,n,r);default:return this.get(t,n,r)}},supportDirectRequest:function(e,t){return!!p.isInTheSameDomain(e)||(void 0!=t.crossOrigin?t.crossOrigin:R()||t.proxy)},get:function(e,t,n){n=n||{};if(e=p.urlAppend(e,this._getParameterString(t||{})),e=this._processUrl(e,n),!this.supportDirectRequest(e,n)){var o={url:e=e.replace(".json",".jsonp"),data:t};return r.Util.RequestJSONPPromise.GET(o)}return this.urlIsLong(e)?this._postSimulatie("GET",e.substring(0,e.indexOf("?")-1),t,n):this._fetch(e,t,n,"GET")},delete:function(e,t,n){n=n||{};if(e=p.urlAppend(e,this._getParameterString(t||{})),e=this._processUrl(e,n),!this.supportDirectRequest(e,n)){e=e.replace(".json",".jsonp");var o={url:e+="&_method=DELETE",data:t};return r.Util.RequestJSONPPromise.DELETE(o)}return this.urlIsLong(e)?this._postSimulatie("DELETE",e.substring(0,e.indexOf("?")-1),t,n):this._fetch(e,t,n,"DELETE")},post:function(e,t,n){if(n=n||{},!this.supportDirectRequest(e,n)){e=e.replace(".json",".jsonp");var o={url:e+="&_method=POST",data:t};return r.Util.RequestJSONPPromise.POST(o)}return this._fetch(this._processUrl(e,n),t,n,"POST")},put:function(e,t,n){if(n=n||{},e=this._processUrl(e,n),!this.supportDirectRequest(e,n)){e=e.replace(".json",".jsonp");var o={url:e+="&_method=PUT",data:t};return r.Util.RequestJSONPPromise.PUT(o)}return this._fetch(e,t,n,"PUT")},urlIsLong:function(e){for(var t=0,n=null,r=0,o=e.length;r<o;r++)(n=e.charCodeAt(r))<127?t++:128<=n&&n<=2047?t+=2:2048<=n&&n<=65535&&(t+=3);return!(t<2e3)},_postSimulatie:function(e,t,n,r){return t+=(t.indexOf("?")>-1?"&":"?")+"_method="+e,"string"!=typeof n&&(n=JSON.stringify(n)),this.post(t,n,r)},_processUrl:function(e,t){if(this._isMVTRequest(e))return e;if(-1===e.indexOf(".json")&&!t.withoutFormatSuffix)if(e.indexOf("?")<0)e+=".json";else{var n=e.split("?");2===n.length&&(e=n[0]+".json?"+n[1])}return t&&t.proxy&&("function"==typeof t.proxy?e=t.proxy(e):(e=decodeURIComponent(e),e=t.proxy+encodeURIComponent(e))),e},_fetch:function(e,t,n,r){return(n=n||{}).headers=n.headers||{},n.headers["Content-Type"]||(n.headers["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8"),n.timeout?this._timeout(n.timeout,O(e,{method:r,headers:n.headers,body:"PUT"===r||"POST"===r?t:void 0,credentials:this._getWithCredentials(n),mode:"cors",timeout:_()}).then(function(e){return e})):O(e,{method:r,body:"PUT"===r||"POST"===r?t:void 0,headers:n.headers,credentials:this._getWithCredentials(n),mode:"cors",timeout:_()}).then(function(e){return e})},_getWithCredentials:function(e){return!0===e.withCredentials?"include":!1===e.withCredentials?"omit":"same-origin"},_fetchJsonp:function(e,t){return t=t||{},T()(e,{method:"GET",timeout:t.timeout}).then(function(e){return e})},_timeout:function(e,t){return new Promise(function(n,r){setTimeout(function(){r(new Error("timeout"))},e),t.then(n,r)})},_getParameterString:function(e){var t=[];for(var n in e){var r,o=e[n];if(null!=o&&"function"!=typeof o)r=Array.isArray(o)||"[object Object]"===o.toString()?encodeURIComponent(JSON.stringify(o)):encodeURIComponent(o),t.push(encodeURIComponent(n)+"="+r)}return t.join("&")},_isMVTRequest:function(e){return e.indexOf(".mvt")>-1||e.indexOf(".pbf")>-1}};function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.Util.RequestJSONPPromise={limitLength:1500,queryKeys:[],queryValues:[],supermap_callbacks:{},addQueryStrings:function(e){for(var t in e){this.queryKeys.push(t),"string"!=typeof e[t]&&(e[t]=r.Util.toJSON(e[t]));var n=encodeURIComponent(e[t]);this.queryValues.push(n)}},issue:function(e){for(var t=this,n=t.getUid(),r=e.url,o=[],i=new Promise(function(e){t.supermap_callbacks[n]=function(r){delete t.supermap_callbacks[n],e(r)}}),s=r,a=0,u=t.queryKeys?t.queryKeys.length:0,l=0;l<u;l++)if(s.length+t.queryKeys[l].length+2>=t.limitLength){if(0==a)return!1;o.push(s),s=r,a=0,l--}else if(s.length+t.queryKeys[l].length+2+t.queryValues[l].length>t.limitLength)for(var c=t.queryValues[l];c.length>0;){var f=t.limitLength-s.length-t.queryKeys[l].length-2;s.indexOf("?")>-1?s+="&":s+="?";var p=c.substring(0,f);"%"===p.substring(f-1,f)?(f-=1,p=c.substring(0,f)):"%"===p.substring(f-2,f-1)&&(f-=2,p=c.substring(0,f)),s+=t.queryKeys[l]+"="+p,c=c.substring(f),p.length>0&&(o.push(s),s=r,a=0)}else a++,s.indexOf("?")>-1?s+="&":s+="?",s+=t.queryKeys[l]+"="+t.queryValues[l];return o.push(s),t.send(o,"SuperMap.Util.RequestJSONPPromise.supermap_callbacks["+n+"]",e&&e.proxy),i},getUid:function(){return 1e3*(new Date).getTime()+Math.floor(1e17*Math.random())},send:function(e,t,n){var r=e.length;if(r>0)for(var o=(new Date).getTime(),i=0;i<r;i++){var s=e[i];s.indexOf("?")>-1?s+="&":s+="?",s+="sectionCount="+r,s+="&sectionIndex="+i,s+="&jsonpUserID="+o,n&&(s=decodeURIComponent(s),s=n+encodeURIComponent(s)),T()(s,{jsonpCallbackFunction:t,timeout:3e4})}},GET:function(e){return this.queryKeys.length=0,this.queryValues.length=0,this.addQueryStrings(e.params),this.issue(e)},POST:function(e){return this.queryKeys.length=0,this.queryValues.length=0,this.addQueryStrings({requestEntity:e.data}),this.issue(e)},PUT:function(e){return this.queryKeys.length=0,this.queryValues.length=0,this.addQueryStrings({requestEntity:e.data}),this.issue(e)},DELETE:function(e){return this.queryKeys.length=0,this.queryValues.length=0,this.addQueryStrings({requestEntity:e.data}),this.issue(e)}};
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var P=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"generateToken",value:function(e,t){var n=this.servers[e];if(n)return I.post(n.tokenServiceUrl,JSON.stringify(t.toJSON())).then(function(e){return e.text()})}},{key:"registerServers",value:function(e){this.servers=this.servers||{},p.isArray(e)||(e=[e]);for(var t=0;t<e.length;t++){var n=e[t];this.servers[n.server]=n}}},{key:"registerToken",value:function(e,t){if(this.tokens=this.tokens||{},e&&t){var n=this._getTokenStorageKey(e);this.tokens[n]=t}}},{key:"registerKey",value:function(e,t){if(this.keys=this.keys||{},e&&!(e.length<1)&&t){e=p.isArray(e)?e:[e];for(var n=0;n<e.length;n++){var r=this._getUrlRestString(e[0])||e[0];this.keys[r]=t}}}},{key:"getServerInfo",value:function(e){return this.servers=this.servers||{},this.servers[e]}},{key:"getToken",value:function(e){if(e){this.tokens=this.tokens||{};var t=this._getTokenStorageKey(e);return this.tokens[t]}}},{key:"getKey",value:function(e){this.keys=this.keys||{};var t=this._getUrlRestString(e)||e;return this.keys[t]}},{key:"loginiServer",value:function(e,t,n,r){e=p.urlPathAppend(e,"services/security/login");var o={username:t&&t.toString(),password:n&&n.toString(),rememberme:r};o=JSON.stringify(o);return I.post(e,o,{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).then(function(e){return e.json()})}},{key:"logoutiServer",value:function(e){e=p.urlPathAppend(e,"services/security/logout");return I.get(e,"",{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},withoutFormatSuffix:!0}).then(function(){return!0}).catch(function(){return!1})}},{key:"loginOnline",value:function(t,n){var r=e.SSO+"/login?service="+t;this._open(r,n)}},{key:"loginiPortal",value:function(e,t,n){e=p.urlPathAppend(e,"web/login");var r={username:t&&t.toString(),password:n&&n.toString()};r=JSON.stringify(r);return I.post(e,r,{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},withCredentials:!0}).then(function(e){return e.json()})}},{key:"logoutiPortal",value:function(e){e=p.urlPathAppend(e,"services/security/logout");return I.get(e,"",{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},withCredentials:!0,withoutFormatSuffix:!0}).then(function(){return!0}).catch(function(){return!1})}},{key:"loginManager",value:function(e,t,n){if(p.isInTheSameDomain(e)){var r=p.urlPathAppend(e,"icloud/security/tokens"),o=t||{},i={username:o.userName&&o.userName.toString(),password:o.password&&o.password.toString()};i=JSON.stringify(i);var s=this;return I.post(r,i,{headers:{Accept:"*/*","Content-Type":"application/json"}}).then(function(e){e.text().then(function(e){return s.imanagerToken=e,e})})}var a=!n||n.isNewTab;this._open(e,a)}},{key:"destroyAllCredentials",value:function(){this.keys=null,this.tokens=null,this.servers=null}},{key:"destroyToken",value:function(e){if(e){var t=this._getTokenStorageKey(e);this.tokens=this.tokens||{},this.tokens[t]&&delete this.tokens[t]}}},{key:"destroyKey",value:function(e){if(e){this.keys=this.keys||{};var t=this._getUrlRestString(e)||e;this.keys[t]&&delete this.keys[t]}}},{key:"_open",value:function(e,t){t=null==t||t;var n=window.screen.availWidth/2-this.INNER_WINDOW_WIDTH/2,r=window.screen.availHeight/2-this.INNER_WINDOW_HEIGHT/2,o="height="+this.INNER_WINDOW_HEIGHT+", width="+this.INNER_WINDOW_WIDTH+",top="+r+", left="+n+",toolbar=no, menubar=no, scrollbars=no, resizable=no, location=no, status=no";t?window.open(e,"login"):window.open(e,"login",o)}},{key:"_getTokenStorageKey",value:function(e){var t=e.match(/(.*?):\/\/([^\/]+)/i);return t?t[0]:e}},{key:"_getUrlRestString",value:function(e){if(!e)return e;var t=e.match(/(http|https):\/\/(.*\/rest)/i);return t?t[0]:e}}],(n=null)&&N(t.prototype,n),r&&N(t,r),e}();P.INNER_WINDOW_WIDTH=600,P.INNER_WINDOW_HEIGHT=600,P.SSO="https://sso.supermap.com",P.ONLINE="https://www.supermapol.com",r.SecurityManager=P;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var w=r.DataFormat={GEOJSON:"GEOJSON",ISERVER:"ISERVER"},C=r.ServerType={ISERVER:"ISERVER",IPORTAL:"IPORTAL",ONLINE:"ONLINE"},A=(r.GeometryType={LINE:"LINE",LINEM:"LINEM",POINT:"POINT",REGION:"REGION",POINTEPS:"POINTEPS",LINEEPS:"LINEEPS",REGIONEPS:"REGIONEPS",ELLIPSE:"ELLIPSE",CIRCLE:"CIRCLE",TEXT:"TEXT",RECTANGLE:"RECTANGLE",UNKNOWN:"UNKNOWN",GEOCOMPOUND:"GEOCOMPOUND"},r.QueryOption={ATTRIBUTE:"ATTRIBUTE",ATTRIBUTEANDGEOMETRY:"ATTRIBUTEANDGEOMETRY",GEOMETRY:"GEOMETRY"},r.JoinType={INNERJOIN:"INNERJOIN",LEFTJOIN:"LEFTJOIN"},r.SpatialQueryMode={CONTAIN:"CONTAIN",CROSS:"CROSS",DISJOINT:"DISJOINT",IDENTITY:"IDENTITY",INTERSECT:"INTERSECT",NONE:"NONE",OVERLAP:"OVERLAP",TOUCH:"TOUCH",WITHIN:"WITHIN"}),L=(r.SpatialRelationType={CONTAIN:"CONTAIN",INTERSECT:"INTERSECT",WITHIN:"WITHIN"},r.MeasureMode={DISTANCE:"DISTANCE",AREA:"AREA"},r.Unit={METER:"METER",KILOMETER:"KILOMETER",MILE:"MILE",YARD:"YARD",DEGREE:"DEGREE",MILLIMETER:"MILLIMETER",CENTIMETER:"CENTIMETER",INCH:"INCH",DECIMETER:"DECIMETER",FOOT:"FOOT",SECOND:"SECOND",MINUTE:"MINUTE",RADIAN:"RADIAN"}),M=(r.BufferRadiusUnit={CENTIMETER:"CENTIMETER",DECIMETER:"DECIMETER",FOOT:"FOOT",INCH:"INCH",KILOMETER:"KILOMETER",METER:"METER",MILE:"MILE",MILLIMETER:"MILLIMETER",YARD:"YARD"},r.EngineType={IMAGEPLUGINS:"IMAGEPLUGINS",OGC:"OGC",ORACLEPLUS:"ORACLEPLUS",SDBPLUS:"SDBPLUS",SQLPLUS:"SQLPLUS",UDB:"UDB"},r.ThemeGraphTextFormat={CAPTION:"CAPTION",CAPTION_PERCENT:"CAPTION_PERCENT",CAPTION_VALUE:"CAPTION_VALUE",PERCENT:"PERCENT",VALUE:"VALUE"},r.ThemeGraphType={AREA:"AREA",BAR:"BAR",BAR3D:"BAR3D",LINE:"LINE",PIE:"PIE",PIE3D:"PIE3D",POINT:"POINT",RING:"RING",ROSE:"ROSE",ROSE3D:"ROSE3D",STACK_BAR:"STACK_BAR",STACK_BAR3D:"STACK_BAR3D",STEP:"STEP"},r.GraphAxesTextDisplayMode={ALL:"ALL",NONE:"NONE",YAXES:"YAXES"},r.GraduatedMode={CONSTANT:"CONSTANT",LOGARITHM:"LOGARITHM",SQUAREROOT:"SQUAREROOT"},r.RangeMode={CUSTOMINTERVAL:"CUSTOMINTERVAL",EQUALINTERVAL:"EQUALINTERVAL",LOGARITHM:"LOGARITHM",QUANTILE:"QUANTILE",SQUAREROOT:"SQUAREROOT",STDDEVIATION:"STDDEVIATION"}),k=(r.ThemeType={DOTDENSITY:"DOTDENSITY",GRADUATEDSYMBOL:"GRADUATEDSYMBOL",GRAPH:"GRAPH",LABEL:"LABEL",RANGE:"RANGE",UNIQUE:"UNIQUE"},r.ColorGradientType={BLACK_WHITE:"BLACKWHITE",BLUE_BLACK:"BLUEBLACK",BLUE_RED:"BLUERED",BLUE_WHITE:"BLUEWHITE",CYAN_BLACK:"CYANBLACK",CYAN_BLUE:"CYANBLUE",CYAN_GREEN:"CYANGREEN",CYAN_WHITE:"CYANWHITE",GREEN_BLACK:"GREENBLACK",GREEN_BLUE:"GREENBLUE",GREEN_ORANGE_VIOLET:"GREENORANGEVIOLET",GREEN_RED:"GREENRED",GREEN_WHITE:"GREENWHITE",PINK_BLACK:"PINKBLACK",PINK_BLUE:"PINKBLUE",PINK_RED:"PINKRED",PINK_WHITE:"PINKWHITE",RAIN_BOW:"RAINBOW",RED_BLACK:"REDBLACK",RED_WHITE:"REDWHITE",SPECTRUM:"SPECTRUM",TERRAIN:"TERRAIN",YELLOW_BLACK:"YELLOWBLACK",YELLOW_BLUE:"YELLOWBLUE",YELLOW_GREEN:"YELLOWGREEN",YELLOW_RED:"YELLOWRED",YELLOW_WHITE:"YELLOWWHITE"}),D=(r.TextAlignment={TOPLEFT:"TOPLEFT",TOPCENTER:"TOPCENTER",TOPRIGHT:"TOPRIGHT",BASELINELEFT:"BASELINELEFT",BASELINECENTER:"BASELINECENTER",BASELINERIGHT:"BASELINERIGHT",BOTTOMLEFT:"BOTTOMLEFT",BOTTOMCENTER:"BOTTOMCENTER",BOTTOMRIGHT:"BOTTOMRIGHT",MIDDLELEFT:"MIDDLELEFT",MIDDLECENTER:"MIDDLECENTER",MIDDLERIGHT:"MIDDLERIGHT"},r.FillGradientMode={NONE:"NONE",LINEAR:"LINEAR",RADIAL:"RADIAL",CONICAL:"CONICAL",SQUARE:"SQUARE"},r.AlongLineDirection={NORMAL:"ALONG_LINE_NORMAL",LB_TO_RT:"LEFT_BOTTOM_TO_RIGHT_TOP",LT_TO_RB:"LEFT_TOP_TO_RIGHT_BOTTOM",RB_TO_LT:"RIGHT_BOTTOM_TO_LEFT_TOP",RT_TO_LB:"RIGHT_TOP_TO_LEFT_BOTTOM"},r.LabelBackShape={DIAMOND:"DIAMOND",ELLIPSE:"ELLIPSE",MARKER:"MARKER",NONE:"NONE",RECT:"RECT",ROUNDRECT:"ROUNDRECT",TRIANGLE:"TRIANGLE"},r.LabelOverLengthMode={NEWLINE:"NEWLINE",NONE:"NONE",OMIT:"OMIT"},r.DirectionType={EAST:"EAST",NONE:"NONE",NORTH:"NORTH",SOURTH:"SOURTH",WEST:"WEST"},r.SideType={LEFT:"LEFT",MIDDLE:"MIDDLE",NONE:"NONE",RIGHT:"RIGHT"},r.SupplyCenterType={FIXEDCENTER:"FIXEDCENTER",NULL:"NULL",OPTIONALCENTER:"OPTIONALCENTER"},r.TurnType={AHEAD:"AHEAD",BACK:"BACK",END:"END",LEFT:"LEFT",NONE:"NONE",RIGHT:"RIGHT"},r.BufferEndType={FLAT:"FLAT",ROUND:"ROUND"},r.OverlayOperationType={CLIP:"CLIP",ERASE:"ERASE",IDENTITY:"IDENTITY",INTERSECT:"INTERSECT",UNION:"UNION",UPDATE:"UPDATE",XOR:"XOR"},r.OutputType={INDEXEDHDFS:"INDEXEDHDFS",UDB:"UDB",MONGODB:"MONGODB",PG:"PG"}),x=(r.SmoothMethod={BSPLINE:"BSPLINE",POLISH:"POLISH"},r.SurfaceAnalystMethod={ISOLINE:"ISOLINE",ISOREGION:"ISOREGION"},r.DataReturnMode={DATASET_AND_RECORDSET:"DATASET_AND_RECORDSET",DATASET_ONLY:"DATASET_ONLY",RECORDSET_ONLY:"RECORDSET_ONLY"},r.EditType={ADD:"add",UPDATE:"update",DELETE:"delete"},r.TransferTactic={LESS_TIME:"LESS_TIME",LESS_TRANSFER:"LESS_TRANSFER",LESS_WALK:"LESS_WALK",MIN_DISTANCE:"MIN_DISTANCE"},r.TransferPreference={BUS:"BUS",SUBWAY:"SUBWAY",NO_SUBWAY:"NO_SUBWAY",NONE:"NONE"},r.GridType={CROSS:"CROSS",GRID:"GRID",POINT:"POINT"},r.ColorSpaceType={CMYK:"CMYK",RGB:"RGB"},r.LayerType={UGC:"UGC",WMS:"WMS",WFS:"WFS",CUSTOM:"CUSTOM"},r.UGCLayerType={THEME:"THEME",VECTOR:"VECTOR",GRID:"GRID",IMAGE:"IMAGE"},r.StatisticMode={AVERAGE:"AVERAGE",MAX:"MAX",MIN:"MIN",STDDEVIATION:"STDDEVIATION",SUM:"SUM",VARIANCE:"VARIANCE"},r.PixelFormat={BIT16:"BIT16",BIT32:"BIT32",BIT64:"BIT64",SINGLE:"SINGLE",DOUBLE:"DOUBLE",UBIT1:"UBIT1",UBIT4:"UBIT4",UBIT8:"UBIT8",UBIT24:"UBIT24",UBIT32:"UBIT32"},r.SearchMode={KDTREE_FIXED_COUNT:"KDTREE_FIXED_COUNT",KDTREE_FIXED_RADIUS:"KDTREE_FIXED_RADIUS",NONE:"NONE",QUADTREE:"QUADTREE"},r.InterpolationAlgorithmType={KRIGING:"KRIGING",SimpleKriging:"SimpleKriging",UniversalKriging:"UniversalKriging"},r.VariogramMode={EXPONENTIAL:"EXPONENTIAL",GAUSSIAN:"GAUSSIAN",SPHERICAL:"SPHERICAL"},r.Exponent={EXP1:"EXP1",EXP2:"EXP2"},r.ClientType={IP:"IP",REFERER:"Referer",REQUESTIP:"RequestIP",NONE:"NONE",SERVER:"SERVER",WEB:"WEB"},r.ChartType={BAR:"Bar",BAR3D:"Bar3D",CIRCLE:"Circle",PIE:"Pie",POINT:"Point",LINE:"Line",RING:"Ring"},r.ClipAnalystMode={CLIP:"clip",INTERSECT:"intersect"}),U=r.AnalystAreaUnit={SQUAREMETER:"SquareMeter",SQUAREKILOMETER:"SquareKiloMeter",HECTARE:"Hectare",ARE:"Are",ACRE:"Acre",SQUAREFOOT:"SquareFoot",SQUAREYARD:"SquareYard",SQUAREMILE:"SquareMile"},j=r.AnalystSizeUnit={METER:"Meter",KILOMETER:"Kilometer",YARD:"Yard",FOOT:"Foot",MILE:"Mile"},F=r.StatisticAnalystMode={MAX:"max",MIN:"min",AVERAGE:"average",SUM:"sum",VARIANCE:"variance",STDDEVIATION:"stdDeviation"},J=r.SummaryType={SUMMARYMESH:"SUMMARYMESH",SUMMARYREGION:"SUMMARYREGION"},H=r.TopologyValidatorRule={REGIONNOOVERLAP:"REGIONNOOVERLAP",REGIONNOOVERLAPWITH:"REGIONNOOVERLAPWITH",REGIONCONTAINEDBYREGION:"REGIONCONTAINEDBYREGION",REGIONCOVEREDBYREGION:"REGIONCOVEREDBYREGION",LINENOOVERLAP:"LINENOOVERLAP",LINENOOVERLAPWITH:"LINENOOVERLAPWITH",POINTNOIDENTICAL:"POINTNOIDENTICAL"};r.AggregationType={GEOHASH_GRID:"geohash_grid",FILTER:"filter"},r.AggregationQueryBuilderType={GEO_BOUNDING_BOX:"geo_bounding_box"},r.GetFeatureMode={BOUNDS:"BOUNDS",BUFFER:"BUFFER",ID:"ID",SPATIAL:"SPATIAL",SQL:"SQL"},r.RasterFunctionType={NDVI:"NDVI",HILLSHADE:"HILLSHADE"},r.ResourceType={MAP:"MAP",SERVICE:"SERVICE",SCENE:"SCENE",DATA:"DATA",INSIGHTS_WORKSPACE:"INSIGHTS_WORKSPACE",MAP_DASHBOARD:"MAP_DASHBOARD"},r.OrderBy={UPDATETIME:"UPDATETIME",HEATLEVEL:"HEATLEVEL",RELEVANCE:"RELEVANCE"},r.OrderType={ASC:"ASC",DESC:"DESC"},r.SearchType={PUBLIC:"PUBLIC",MY_RES:"MY_RES",MYGROUP_RES:"MYGROUP_RES",MYDEPARTMENT_RES:"MYDEPARTMENT_RES",SHARETOME_RES:"SHARETOME_RES"},r.AggregationTypes={TAG:"TAG",TYPE:"TYPE"},r.PermissionType={SEARCH:"SEARCH",READ:"READ",READWRITE:"READWRITE",DELETE:"DELETE",DOWNLOAD:"DOWNLOAD"},r.EntityType={DEPARTMENT:"DEPARTMENT",GROUP:"GROUP",IPORTALGROUP:"IPORTALGROUP",ROLE:"ROLE",USER:"USER"},r.DataItemType={WORKSPACE:"WORKSPACE",UDB:"UDB",SHP:"SHP",EXCEL:"EXCEL",CSV:"CSV",GEOJSON:"GEOJSON",SMTILES:"SMTILES",SVTILES:"SVTILES",MBTILES:"MBTILES",TPK:"TPK",UGCV5:"UGCV5",UGCV5_MVT:"UGCV5_MVT",JSON:"JSON"},r.WebExportFormatType={PNG:"PNG",PDF:"PDF"},r.WebScaleOrientationType={HORIZONTALLABELSBELOW:"HORIZONTALLABELSBELOW",HORIZONTALLABELSABOVE:"HORIZONTALLABELSABOVE",VERTICALLABELSLEFT:"VERTICALLABELSLEFT",VERTICALLABELSRIGHT:"VERTICALLABELSRIGHT"},r.WebScaleType={LINE:"LINE",BAR:"BAR",BAR_SUB:"BAR_SUB"},r.WebScaleUnit={METER:"METER",FOOT:"FOOT",DEGREES:"DEGREES"};function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var G=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.alias=null,this.connect=null,this.dataBase=null,this.driver=null,this.engineType=null,this.exclusive=null,this.OpenLinkTable=null,this.password=null,this.readOnly=null,this.server=null,this.user=null,t&&p.extend(this,t),this.CLASS_NAME="SuperMap.DatasourceConnectionInfo"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;e.alias=null,e.connect=null,e.dataBase=null,e.driver=null,e.engineType=null,e.exclusive=null,e.OpenLinkTable=null,e.password=null,e.readOnly=null,e.server=null,e.user=null}}])&&B(t.prototype,n),r&&B(t,r),e}();function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.DatasourceConnectionInfo=G;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var K=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=D.UDB,this.datasetName="analystResult",this.datasourceInfo=null,this.outputPath="",p.extend(this,t),this.CLASS_NAME="SuperMap.OutputSetting"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;e.type=null,e.datasetName=null,e.outputPath=null,e.datasourceInfo instanceof G&&(e.datasourceInfo.destroy(),e.datasourceInfo=null)}}])&&V(t.prototype,n),r&&V(t,r),e}();function Y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.OutputSetting=K;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var W=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.items=null,this.numericPrecision=1,this.rangeMode=M.EQUALINTERVAL,this.rangeCount="",this.colorGradientType=k.YELLOW_RED,p.extend(this,t),this.CLASS_NAME="SuperMap.MappingParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;if(e.items){if(e.items.length>0)for(var t in e.items)e.items[t].destroy(),e.items[t]=null;e.items=null}e.numericPrecision=null,e.rangeMode=null,e.rangeCount=null,e.colorGradientType=null}}])&&Y(t.prototype,n),r&&Y(t,r),e}();function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.MappingParameters=W;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Q=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasetName="",this.query="",this.resolution=80,this.method=0,this.meshType=0,this.fields="",this.radius=300,this.meshSizeUnit=j.METER,this.radiusUnit=j.METER,this.areaUnit=U.SQUAREMILE,this.output=null,this.mappingParameters=null,p.extend(this,t),this.CLASS_NAME="SuperMap.KernelDensityJobParameter")}var t,n,r;return t=e,r=[{key:"toObject",value:function(e,t){for(var n in e)"datasetName"!==n?"output"!==n?(t.analyst=t.analyst||{},"query"===n&&e[n]?t.analyst[n]=e[n].toBBOX():t.analyst[n]=e[n],"mappingParameters"===n&&(t.analyst[n]=t.analyst[n]||{},t.analyst.mappingParameters=e[n])):(t.output=t.output||{},t.output=e[n]):(t.input=t.input||{},t.input[n]=e[n])}}],(n=[{key:"destroy",value:function(){this.datasetName=null,this.query=null,this.resolution=null,this.method=null,this.radius=null,this.meshType=null,this.fields=null,this.meshSizeUnit=null,this.radiusUnit=null,this.areaUnit=null,this.output instanceof K&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof W&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&q(t.prototype,n),r&&q(t,r),e}();function X(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.KernelDensityJobParameter=Q;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var z=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasetName="",this.datasetQuery="",this.geometryQuery="",this.mode=A.CONTAIN,this.output=null,this.mappingParameters=null,p.extend(this,t),this.CLASS_NAME="SuperMap.SingleObjectQueryJobsParameter")}var t,n,r;return t=e,r=[{key:"toObject",value:function(e,t){for(var n in e)"datasetName"!==n?"output"!==n?(t.analyst=t.analyst||{},t.analyst[n]=e[n],"mappingParameters"===n&&(t.analyst[n]=t.analyst[n]||{},t.analyst.mappingParameters=e[n])):(t.output=t.output||{},t.output=e[n]):(t.input=t.input||{},t.input[n]=e[n])}}],(n=[{key:"destroy",value:function(){this.datasetName=null,this.datasetQuery=null,this.geometryQuery=null,this.mode=null,this.output instanceof K&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof W&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&X(t.prototype,n),r&&X(t,r),e}();function Z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.SingleObjectQueryJobsParameter=z;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var $=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasetName="",this.groupField="",this.attributeField="",this.statisticModes="",this.output=null,this.mappingParameters=null,p.extend(this,t),this.CLASS_NAME="SuperMap.SummaryAttributesJobsParameter")}var t,n,r;return t=e,r=[{key:"toObject",value:function(e,t){for(var n in e)"datasetName"!==n?"output"!==n?(t.analyst=t.analyst||{},t.analyst[n]=e[n],"mappingParameters"===n&&(t.analyst[n]=t.analyst[n]||{},t.analyst.mappingParameters=e[n])):(t.output=t.output||{},t.output=e[n]):(t.input=t.input||{},t.input[n]=e[n])}}],(n=[{key:"destroy",value:function(){this.datasetName=null,this.groupField=null,this.attributeField=null,this.statisticModes=null,this.output instanceof K&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof W&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&Z(t.prototype,n),r&&Z(t,r),e}();function ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.SummaryAttributesJobsParameter=$;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var te=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasetName="",this.regionDataset="",this.query="",this.resolution=100,this.meshType=0,this.statisticModes=F.AVERAGE,this.fields="",this.type=J.SUMMARYMESH,this.output=null,this.mappingParameters=null,p.extend(this,t),this.CLASS_NAME="SuperMap.SummaryMeshJobParameter")}var t,n,r;return t=e,r=[{key:"toObject",value:function(e,t){for(var n in e)"datasetName"!==n?"type"!==n?"output"!==n?("SUMMARYMESH"===e.type&&"regionDataset"!==n||"SUMMARYREGION"===e.type&&!r(["meshType","resolution","query"],n))&&(t.analyst=t.analyst||{},"query"===n&&e[n]?t.analyst[n]=e[n].toBBOX():t.analyst[n]=e[n],"mappingParameters"===n&&(t.analyst[n]=t.analyst[n]||{},t.analyst.mappingParameters=e[n])):(t.output=t.output||{},t.output=e[n]):t.type=e[n]:(t.input=t.input||{},t.input[n]=e[n]);function r(e,t){for(var n=e.length;n--;)if(e[n]===t)return!0;return!1}}}],(n=[{key:"destroy",value:function(){this.datasetName=null,this.query=null,this.resolution=null,this.statisticModes=null,this.meshType=null,this.fields=null,this.regionDataset=null,this.type=null,this.output instanceof K&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof W&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&ee(t.prototype,n),r&&ee(t,r),e}();function ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.SummaryMeshJobParameter=te;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var re=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasetName="",this.regionDataset="",this.sumShape=!0,this.query="",this.standardSummaryFields=!1,this.standardFields="",this.standardStatisticModes="",this.weightedSummaryFields=!1,this.weightedFields="",this.weightedStatisticModes="",this.meshType=0,this.resolution=100,this.meshSizeUnit=j.METER,this.type=J.SUMMARYMESH,this.output=null,this.mappingParameters=null,p.extend(this,t),this.CLASS_NAME="SuperMap.SummaryRegionJobParameter")}var t,n,r;return t=e,r=[{key:"toObject",value:function(e,t){for(var n in e)"datasetName"!==n?"type"!==n&&"type"!==n?"output"!==n?("SUMMARYREGION"===e.type||"SUMMARYMESH"===e.type&&"regionDataset"!==n)&&(t.analyst=t.analyst||{},"query"===n&&e[n]?t.analyst[n]=e[n].toBBOX():t.analyst[n]=e[n],"mappingParameters"===n&&(t.analyst[n]=t.analyst[n]||{},t.analyst.mappingParameters=e[n])):(t.output=t.output||{},t.output=e[n]):t.type=e[n]:(t.input=t.input||{},t.input[n]=e[n])}}],(n=[{key:"destroy",value:function(){this.datasetName=null,this.sumShape=null,this.regionDataset=null,this.query=null,this.standardSummaryFields=null,this.standardFields=null,this.standardStatisticModes=null,this.weightedSummaryFields=null,this.weightedFields=null,this.weightedStatisticModes=null,this.meshType=null,this.resolution=null,this.meshSizeUnit=null,this.type=null,this.output instanceof K&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof W&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&ne(t.prototype,n),r&&ne(t,r),e}();function oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.SummaryRegionJobParameter=re;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var ie=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasetName="",this.datasetOverlay="",this.mode="",this.srcFields="",this.overlayFields="",this.output=null,this.mappingParameters=null,p.extend(this,t),this.CLASS_NAME="SuperMap.OverlayGeoJobParameter")}var t,n,r;return t=e,r=[{key:"toObject",value:function(e,t){for(var n in e)"datasetName"!=n?"output"!==n?(t.analyst=t.analyst||{},t.analyst[n]=e[n],"mappingParameters"===n&&(t.analyst[n]=t.analyst[n]||{},t.analyst.mappingParameters=e[n])):(t.output=t.output||{},t.output=e[n]):(t.input=t.input||{},t.input[n]=e[n])}}],(n=[{key:"destroy",value:function(){this.datasetName=null,this.datasetOverlay=null,this.mode=null,this.srcFields=null,this.overlayFields=null,this.output instanceof K&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof W&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&oe(t.prototype,n),r&&oe(t,r),e}();function se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.OverlayGeoJobParameter=ie;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var ae=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasetName="",this.bounds="",this.distance="",this.distanceField="",this.distanceUnit=j.METER,this.dissolveField="",this.output=null,this.mappingParameters=null,!t)return this;p.extend(this,t),this.CLASS_NAME="SuperMap.BuffersAnalystJobsParameter"}var t,n,r;return t=e,r=[{key:"toObject",value:function(e,t){for(var n in e)"datasetName"!==n?"output"!==n?(t.analyst=t.analyst||{},"bounds"===n&&e[n]?t.analyst[n]=e[n].toBBOX():t.analyst[n]=e[n],"mappingParameters"===n&&(t.analyst[n]=t.analyst[n]||{},t.analyst.mappingParameters=e[n])):(t.output=t.output||{},t.output=e[n]):(t.input=t.input||{},t.input[n]=e[n])}}],(n=[{key:"destroy",value:function(){this.datasetName=null,this.bounds=null,this.distance=null,this.distanceField=null,this.distanceUnit=null,this.dissolveField=null,this.output instanceof K&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof W&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&se(t.prototype,n),r&&se(t,r),e}();function ue(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.BuffersAnalystJobsParameter=ae;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var le=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasetName="",this.datasetTopology="",this.tolerance="",this.rule=H.REGIONNOOVERLAP,this.output=null,this.mappingParameters=null,p.extend(this,t),this.CLASS_NAME="SuperMap.TopologyValidatorJobsParameter")}var t,n,r;return t=e,r=[{key:"toObject",value:function(e,t){for(var n in e)"datasetName"!==n?"output"!==n?(t.analyst=t.analyst||{},t.analyst[n]=e[n],"mappingParameters"===n&&(t.analyst[n]=t.analyst[n]||{},t.analyst.mappingParameters=e[n])):(t.output=t.output||{},t.output=e[n]):(t.input=t.input||{},t.input[n]=e[n])}}],(n=[{key:"destroy",value:function(){this.datasetName=null,this.datasetTopology=null,this.tolerance=null,this.rule=null,this.output instanceof K&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof W&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&ue(t.prototype,n),r&&ue(t,r),e}();function ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.TopologyValidatorJobsParameter=le;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var fe=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t.filters&&"string"==typeof t.filters&&(t.filters=t.filters.split(",")),this.address=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null,p.extend(this,t)}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.address=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null}}])&&ce(t.prototype,n),r&&ce(t,r),e}();function pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.GeoCodingParameter=fe;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var he=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t.filters&&(t.filters=t.filters.split(",")),this.x=null,this.y=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null,this.geoDecodingRadius=null,p.extend(this,t)}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.x=null,this.y=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null,this.geoDecodingRadius=null}}])&&pe(t.prototype,n),r&&pe(t,r),e}();r.GeoDecodingParameter=he;var ye=window.SuperMap=window.SuperMap||{};ye.REST=ye.REST||{};var de=n(0);function ve(e){"@babel/helpers - typeof";return(ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ee(e,t,n){return(Ee="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Oe(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function ge(e,t){return(ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function be(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Oe(e);if(t){var o=Oe(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Se(this,n)}}function Se(e,t){return!t||"object"!==ve(t)&&"function"!=typeof t?Te(e):t}function Te(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Oe(e){return(Oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Re=de.baiduMapLayer?de.baiduMapLayer.__proto__:Function,_e=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ge(e,t)}(i,Re);var t,n,r,o=be(i);function i(e,t,n,r){var s;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),s=o.call(this,e,n,r),!Re)return Se(s,Te(s));var a=Te(s);return r=r||{},a.init(r),a.argCheck(r),s.canvasLayer=t,s.clickEvent=s.clickEvent.bind(Te(s)),s.mousemoveEvent=s.mousemoveEvent.bind(Te(s)),s.bindEvent(),s}return t=i,(n=[{key:"clickEvent",value:function(e){var t=e.xy;Ee(Oe(i.prototype),"clickEvent",this).call(this,t,e)}},{key:"mousemoveEvent",value:function(e){var t=e.xy;Ee(Oe(i.prototype),"mousemoveEvent",this).call(this,t,e)}},{key:"bindEvent",value:function(){var e=this.map;this.options.methods&&(this.options.methods.click&&e.events.on({click:this.clickEvent}),this.options.methods.mousemove&&e.events.on({mousemove:this.mousemoveEvent}))}},{key:"unbindEvent",value:function(){var e=this.map;this.options.methods&&(this.options.methods.click&&e.events.un({click:this.clickEvent}),this.options.methods.mousemove&&e.events.un({mousemove:this.mousemoveEvent}))}},{key:"getContext",value:function(){return this.canvasLayer&&this.canvasLayer.canvasContext}},{key:"addData",value:function(e,t){var n=e;e&&e.get&&(n=e.get()),this.dataSet.add(n),this.update({options:t})}},{key:"setData",value:function(e,t){var n=e;e&&e.get&&(n=e.get()),this.dataSet=this.dataSet||new de.DataSet,this.dataSet.set(n),this.update({options:t})}},{key:"getData",value:function(){return this.dataSet}},{key:"removeData",value:function(e){if(this.dataSet){var t=this.dataSet.get({filter:function(t){return null==e||"function"!=typeof e||!e(t)}});this.dataSet.set(t),this.update({options:null})}}},{key:"clearData",value:function(){this.dataSet&&this.dataSet.clear(),this.update({options:null})}},{key:"render",value:function(e){this._canvasUpdate(e)}},{key:"transferToMercator",value:function(){if(this.options.coordType&&["bd09mc","coordinates_mercator"].indexOf(this.options.coordType)>-1){var e=this.dataSet.get();e=this.dataSet.transferCoordinate(e,function(e){var t=ye.Projection.transform({x:e[0],y:e[1]},"EPSG:3857","EPSG:4326");return[t.x,t.y]},"coordinates","coordinates"),this.dataSet._set(e)}}},{key:"_canvasUpdate",value:function(e){if(this.canvasLayer){var t=this.options.animation,n=this.getContext(),r=this.map;if(this.isEnabledTime()){if(void 0===e)return void this.clear(n);"2d"===this.context&&(n.save(),n.globalCompositeOperation="destination-out",n.fillStyle="rgba(0, 0, 0, .1)",n.fillRect(0,0,n.canvas.width,n.canvas.height),n.restore())}else this.clear(n);if("2d"===this.context)for(var o in this.options)n[o]=this.options[o];else n.clear(n.COLOR_BUFFER_BIT);if(!(this.options.minZoom&&r.getZoom()<this.options.minZoom||this.options.maxZoom&&r.getZoom()>this.options.maxZoom)){var i=this.canvasLayer,s={fromColumn:"coordinates",transferCoordinate:function(e){var t={lon:e[0],lat:e[1]},n=r.getViewPortPxFromLonLat(t);return[n.x,n.y]}};void 0!==e&&(s.filter=function(n){var r=t.trails||10;return e&&n.time>e-r&&n.time<e});var a=this.dataSet.get(s);this.processData(a);var u=r.getResolution()*function(e){var t;if(e===L.METER)t=1;else if(e===L.DEGREE)t=2*Math.PI*6378137/360;else if(e===L.KILOMETER)t=.001;else if(e===L.INCH)t=1/.025399999918;else{if(e!==L.FOOT)return t;t=.3048}return t}("DEGREE");"m"===this.options.unit?(this.options.size&&(this.options._size=this.options.size/u),this.options.width&&(this.options._width=this.options.width/u),this.options.height&&(this.options._height=this.options.height/u)):(this.options._size=this.options.size,this.options._height=this.options.height,this.options._width=this.options.width);var l=r.getViewPortPxFromLonLat(i.transferToMapLatLng({lon:0,lat:0}));this.drawContext(n,a,this.options,l),this.options.updateCallback&&this.options.updateCallback(e)}}}},{key:"init",value:function(e){this.options=e,this.initDataRange(e),this.context=this.options.context||"2d",this.options.zIndex&&this.canvasLayer&&this.canvasLayer.setZIndex(this.options.zIndex),this.initAnimator()}},{key:"addAnimatorEvent",value:function(){this.map.events.on({movestart:this.animatorMovestartEvent.bind(this)}),this.map.events.on({moveend:this.animatorMoveendEvent.bind(this)})}},{key:"clear",value:function(e){e&&e.clearRect&&e.clearRect(0,0,e.canvas.width,e.canvas.height)}},{key:"show",value:function(){this.map.addLayer(this.canvasLayer)}},{key:"hide",value:function(){this.map.removeLayer(this.canvasLayer)}},{key:"draw",value:function(){this.canvasLayer.redraw()}}])&&me(t.prototype,n),r&&me(t,r),i}();function Ie(e){"@babel/helpers - typeof";return(Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Pe(e,t,n){return(Pe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Me(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function we(e,t){return(we=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ce(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Me(e);if(t){var o=Me(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ae(this,n)}}function Ae(e,t){return!t||"object"!==Ie(t)&&"function"!=typeof t?Le(e):t}function Le(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Me(e){return(Me=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var ke=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&we(e,t)}(i,ye.Layer);var t,n,r,o=Ce(i);function i(e,t){var n;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).dataSet=null,n.options=null,n.supported=!1,n.canvas=null,n.canvasContext=null,t&&ye.Util.extend(Le(n),t),n.canvas=document.createElement("canvas"),!n.canvas.getContext)return Ae(n);n.supported=!0,n.canvas.style.position="absolute",n.canvas.style.top="0px",n.canvas.style.left="0px",n.div.appendChild(n.canvas);var r=n.options&&n.options.context||"2d";n.canvasContext=n.canvas.getContext(r);var s="undefined"==typeof window?{}:window,a=n.devicePixelRatio=s.devicePixelRatio||1;return"2d"==r&&n.canvasContext.scale(a,a),n.attribution="Â© 2018 ç¾åº¦ <a href='https://mapv.baidu.com' target='_blank'>MapV</a> with <span>Â© <a target='_blank' href='https://iclient.supermap.io' style='color: #08c;text-decoration: none;'>SuperMap iClient</a></span>",n.CLASS_NAME="SuperMap.Layer.MapVLayer",n}return t=i,(n=[{key:"destroy",value:function(){this.renderer&&this.renderer.animator&&(this.renderer.animator.stop(),this.renderer.animator=null),this.dataSet=null,this.options=null,this.renderer=null,this.supported=null,this.canvas=null,this.canvasContext=null,this.maxWidth=null,this.maxHeight=null,Pe(Me(i.prototype),"destroy",this).call(this)}},{key:"addData",value:function(e,t){this.renderer&&this.renderer.addData(e,t)}},{key:"setData",value:function(e,t){this.renderer&&this.renderer.setData(e,t)}},{key:"getData",value:function(){return this.renderer&&(this.dataSet=this.renderer.getData()),this.dataSet}},{key:"removeData",value:function(e){this.renderer&&this.renderer.removeData(e)}},{key:"clearData",value:function(){this.renderer.clearData()}},{key:"setMap",value:function(e){Pe(Me(i.prototype),"setMap",this).call(this,e),this.renderer=new _e(e,this,this.dataSet,this.options),this.supported?this.redraw():this.map.removeLayer(this)}},{key:"moveTo",value:function(e,t,n){if(Pe(Me(i.prototype),"moveTo",this).call(this,e,t,n),this.supported){if(this.zoomChanged=t,!n){this.div.style.visibility="hidden",this.div.style.left=-parseInt(this.map.layerContainerDiv.style.left)+"px",this.div.style.top=-parseInt(this.map.layerContainerDiv.style.top)+"px";var r=this.map.getSize();this.div.style.width=parseInt(r.w)+"px",this.div.style.height=parseInt(r.h)+"px",this.canvas.width=parseInt(r.w),this.canvas.height=parseInt(r.h),this.canvas.style.width=this.div.style.width,this.canvas.style.height=this.div.style.height,this.maxWidth=r.w,this.maxHeight=r.h,this.div.style.visibility="",t||this.renderer&&this.renderer.render()}t&&this.renderer&&this.renderer.render()}}},{key:"transferToMapLatLng",value:function(e){var t="EPSG:4326",n=this.map.getUnits()||"degree";return["m","meter"].indexOf(n.toLowerCase())>-1&&(t="EPSG:3857"),new ye.LonLat(e.lon,e.lat).transform("EPSG:4326",t)}}])&&Ne(t.prototype,n),r&&Ne(t,r),i}();function De(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}ye.Layer.MapVLayer=ke;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var xe=function(){function e(t,n){!
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.value=t||"",this.name=n||"token",this.CLASS_NAME="SuperMap.Credential"}var t,n,r;return t=e,(n=[{key:"getUrlParameters",value:function(){return this.name+"="+this.value}},{key:"getValue",value:function(){return this.value}},{key:"destroy",value:function(){this.value=null,this.name=null}}])&&De(t.prototype,n),r&&De(t,r),e}();function Ue(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}xe.CREDENTIAL=null,r.Credential=xe;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var je=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=null,this.keepData=!1,p.extend(this,t),this.options=t,this.CLASS_NAME="SuperMap.Format"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){}},{key:"read",value:function(e){}},{key:"write",value:function(e){}}])&&Ue(t.prototype,n),r&&Ue(t,r),e}();function Fe(e){"@babel/helpers - typeof";return(Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Je(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function He(e,t){return(He=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Be(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Ge(e);if(t){var o=Ge(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Fe(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Ge(e){return(Ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Format=r.Format||je;var Ve=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&He(e,t)}(i,je);var t,n,r,o=Be(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).indent="    ",t.space=" ",t.newline="\n",t.level=0,t.pretty=!1,t.nativeJSON=!(!window.JSON||"function"!=typeof JSON.parse||"function"!=typeof JSON.stringify),t.CLASS_NAME="SuperMap.Format.JSON",t.serialize={object:function(e){if(null==e)return"null";if(e.constructor===Date)return this.serialize.date.apply(this,[e]);if(e.constructor===Array)return this.serialize.array.apply(this,[e]);var t,n,r,o=["{"];this.level+=1;var i=!1;for(t in e)e.hasOwnProperty(t)&&(n=this.write.apply(this,[t,this.pretty]),r=this.write.apply(this,[e[t],this.pretty]),null!=n&&null!=r&&(i&&o.push(","),o.push(this.writeNewline(),this.writeIndent(),n,":",this.writeSpace(),r),i=!0));return this.level-=1,o.push(this.writeNewline(),this.writeIndent(),"}"),o.join("")},array:function(e){var t,n=["["];this.level+=1;for(var r=0,o=e.length;r<o;++r)null!=(t=this.write.apply(this,[e[r],this.pretty]))&&(r>0&&n.push(","),n.push(this.writeNewline(),this.writeIndent(),t));return this.level-=1,n.push(this.writeNewline(),this.writeIndent(),"]"),n.join("")},string:function(e){var t={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return/["\\\x00-\x1f]/.test(e)?'"'+e.replace(/([\x00-\x1f\\"])/g,function(e,n){var r=t[n];return r||(r=n.charCodeAt(),"\\u00"+Math.floor(r/16).toString(16)+(r%16).toString(16))})+'"':'"'+e+'"'},number:function(e){return isFinite(e)?String(e):"null"},boolean:function(e){return String(e)},date:function(e){function t(e){return e<10?"0"+e:e}return'"'+e.getFullYear()+"-"+t(e.getMonth()+1)+"-"+t(e.getDate())+"T"+t(e.getHours())+":"+t(e.getMinutes())+":"+t(e.getSeconds())+'"'}},t}return t=i,(n=[{key:"read",value:function(e,t){var n;if(this.nativeJSON)try{n=JSON.parse(e,t)}catch(e){}return this.keepData&&(this.data=n),n}},{key:"write",value:function(e,t){this.pretty=!!t;var n=null,r=Fe(e);if(this.serialize[r])try{n=!this.pretty&&this.nativeJSON?JSON.stringify(e):this.serialize[r].apply(this,[e])}catch(e){}return n}},{key:"writeIndent",value:function(){var e=[];if(this.pretty)for(var t=0;t<this.level;++t)e.push(this.indent);return e.join("")}},{key:"writeNewline",value:function(){return this.pretty?this.newline:""}},{key:"writeSpace",value:function(){return this.pretty?this.space:""}}])&&Je(t.prototype,n),r&&Je(t,r),i}();function Ke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.Format.JSON=Ve;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Ye=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var r=this;this.EVENT_TYPES=["processCompleted","processFailed"],this.events=null,this.eventListeners=null,this.url=null,this.urls=null,this.proxy=null,this.serverType=null,this.index=null,this.length=null,this.options=null,this.totalTimes=null,this.POLLING_TIMES=3,this._processSuccess=null,this._processFailed=null,this.isInTheSameDomain=null,this.withCredentials=!1,p.isArray(t)?(r.urls=t,r.length=t.length,r.totalTimes=r.length,1===r.length?r.url=t[0]:(r.index=parseInt(Math.random()*r.length),r.url=t[r.index])):(r.totalTimes=1,r.url=t),p.isArray(t)&&!r.isServiceSupportPolling()&&(r.url=t[0],r.totalTimes=1),r.serverType=r.serverType||C.ISERVER,n=n||{},this.crossOrigin=n.crossOrigin,this.headers=n.headers,p.extend(this,n),r.isInTheSameDomain=p.isInTheSameDomain(r.url),r.events=new v(r,null,r.EVENT_TYPES,!0),r.eventListeners instanceof Object&&r.events.on(r.eventListeners),this.CLASS_NAME="SuperMap.CommonServiceBase"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;p.isArray(e.urls)&&(e.urls=null,e.index=null,e.length=null,e.totalTimes=null),e.url=null,e.options=null,e._processSuccess=null,e._processFailed=null,e.isInTheSameDomain=null,e.EVENT_TYPES=null,e.events&&(e.events.destroy(),e.events=null),e.eventListeners&&(e.eventListeners=null)}},{key:"request",value:function(e){var t=this;e.url=e.url||t.url,e.proxy=e.proxy||t.proxy,e.withCredentials=void 0!=e.withCredentials?e.withCredentials:t.withCredentials,e.crossOrigin=void 0!=e.crossOrigin?e.crossOrigin:t.crossOrigin,e.headers=e.headers||t.headers,e.isInTheSameDomain=t.isInTheSameDomain;var n=this.getCredential(e.url);n&&(e.url=p.urlAppend(e.url,n.getUrlParameters())),t.calculatePollingTimes(),t._processSuccess=e.success,t._processFailed=e.failure,e.scope=t,e.success=t.getUrlCompleted,e.failure=t.getUrlFailed,t.options=e,t._commit(t.options)}},{key:"getCredential",value:function(e){var t,n,r=e;switch(this.serverType){case C.IPORTAL:(t=(n=P.getToken(r))?new xe(n,"token"):null)||(t=(n=P.getKey(r))?new xe(n,"key"):null);break;case C.ONLINE:t=(n=P.getKey(r))?new xe(n,"key"):null;break;default:t=(n=P.getToken(r))?new xe(n,"token"):null}return t}},{key:"getUrlCompleted",value:function(e){this._processSuccess(e)}},{key:"getUrlFailed",value:function(e){this.totalTimes>0?(this.totalTimes--,this.ajaxPolling()):this._processFailed(e)}},{key:"ajaxPolling",value:function(){var e=this,t=e.options.url,n=/^http:\/\/([a-z]{9}|(\d+\.){3}\d+):\d{0,4}/;e.index=parseInt(Math.random()*e.length),e.url=e.urls[e.index],t=t.replace(n,n.exec(e.url)[0]),e.options.url=t,e.options.isInTheSameDomain=p.isInTheSameDomain(t),e._commit(e.options)}},{key:"calculatePollingTimes",value:function(){var e=this;e.times?e.totalTimes>e.POLLING_TIMES?e.times>e.POLLING_TIMES?e.totalTimes=e.POLLING_TIMES:e.totalTimes=e.times:e.times<e.totalTimes&&(e.totalTimes=e.times):e.totalTimes>e.POLLING_TIMES&&(e.totalTimes=e.POLLING_TIMES),e.totalTimes--}},{key:"isServiceSupportPolling",value:function(){return!("SuperMap.REST.ThemeService"===this.CLASS_NAME||"SuperMap.REST.EditFeaturesService"===this.CLASS_NAME)}},{key:"serviceProcessCompleted",value:function(e){e=p.transformResult(e),this.events.triggerEvent("processCompleted",{result:e})}},{key:"serviceProcessFailed",value:function(e){var t=(e=p.transformResult(e)).error||e;this.events.triggerEvent("processFailed",{error:t})}},{key:"_commit",value:function(e){"POST"!==e.method&&"PUT"!==e.method||(e.params&&(e.url=p.urlAppend(e.url,p.getParameterString(e.params||{}))),e.params=e.data),I.commit(e.method,e.url,e.params,{headers:e.headers,withCredentials:e.withCredentials,crossOrigin:e.crossOrigin,timeout:e.async?0:null,proxy:e.proxy}).then(function(e){return e.text?e.text():e.json?e.json():e}).then(function(t){var n=t;("string"==typeof t&&(n=(new Ve).read(t)),(!n||n.error||n.code>=300&&304!==n.code)&&(n=n&&n.error?{error:n.error}:{error:n}),n.error)?(e.scope?a.bind(e.failure,e.scope):e.failure)(n):(n.succeed=void 0==n.succeed||n.succeed,(e.scope?a.bind(e.success,e.scope):e.success)(n))}).catch(function(t){(e.scope?a.bind(e.failure,e.scope):e.failure)(t)})}}])&&Ke(t.prototype,n),r&&Ke(t,r),e}();function We(e){"@babel/helpers - typeof";return(We="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qe(e,t,n){return(Qe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ze(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Xe(e,t){return(Xe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ze(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Ze(e);if(t){var o=Ze(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===We(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Ze(e){return(Ze=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.CommonServiceBase=Ye;var $e=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xe(e,t)}(i,Ye);var t,n,r,o=ze(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).options=t||{},n.CLASS_NAME="SuperMap.AddressMatchService",n}return t=i,(n=[{key:"destroy",value:function(){Qe(Ze(i.prototype),"destroy",this).call(this)}},{key:"code",value:function(e,t){t instanceof fe&&this.processAsync(e,t)}},{key:"decode",value:function(e,t){t instanceof he&&this.processAsync(e,t)}},{key:"processAsync",value:function(e,t){this.request({method:"GET",url:e,params:t,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}},{key:"serviceProcessCompleted",value:function(e){e.succeed&&delete e.succeed,Qe(Ze(i.prototype),"serviceProcessCompleted",this).call(this,e)}},{key:"serviceProcessFailed",value:function(e){Qe(Ze(i.prototype),"serviceProcessFailed",this).call(this,e)}}])&&qe(t.prototype,n),r&&qe(t,r),i}();function et(e){"@babel/helpers - typeof";return(et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nt(e,t){return(nt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function rt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=ot(e);if(t){var o=ot(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===et(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function ot(e){return(ot=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.AddressMatchService=$e;var it=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nt(e,t)}(i,Ye);var t,n,r,o=rt(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).CLASS_NAME="SuperMap.REST.AddressMatchService",n}return t=i,(n=[{key:"code",value:function(e,t){var n=this;new $e(n.url,{headers:n.headers,proxy:n.proxy,withCredentials:n.withCredentials,crossOrigin:n.crossOrigin,serverType:n.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t}}).code(n.url+"/geocoding",e)}},{key:"decode",value:function(e,t){var n=this;new $e(n.url,{headers:n.headers,proxy:n.proxy,withCredentials:n.withCredentials,crossOrigin:n.crossOrigin,serverType:n.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t}}).decode(n.url+"/geodecoding",e)}}])&&tt(t.prototype,n),r&&tt(t,r),i}();function st(e){"@babel/helpers - typeof";return(st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function at(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ut(e,t,n){return(ut="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ft(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function lt(e,t){return(lt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ct(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=ft(e);if(t){var o=ft(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===st(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function ft(e){return(ft=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/ye.REST.AddressMatchService=it;var pt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lt(e,t)}(i,Ye);var t,n,r,o=ct(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=t||{}).EVENT_TYPES=["processCompleted","processFailed","processRunning"],(n=o.call(this,e,t)).CLASS_NAME="SuperMap.ProcessingServiceBase",n}return t=i,(n=[{key:"destroy",value:function(){ut(ft(i.prototype),"destroy",this).call(this)}},{key:"getJobs",value:function(e){var t=this;I.get(t._processUrl(e),null,{proxy:t.proxy}).then(function(e){return e.json()}).then(function(e){t.events.triggerEvent("processCompleted",{result:e})}).catch(function(e){t.eventListeners.processFailed({error:e})})}},{key:"addJob",value:function(e,t,n,r){var o=this,i=null;t&&t instanceof n&&(i=new Object,n.toObject(t,i));var s=Object.assign({"Content-Type":"application/x-www-form-urlencoded"},o.headers||{}),a={proxy:o.proxy,headers:s,withCredentials:o.withCredentials,crossOrigin:o.crossOrigin,isInTheSameDomain:o.isInTheSameDomain};I.post(o._processUrl(e),JSON.stringify(i),a).then(function(e){return e.json()}).then(function(e){e.succeed?o.serviceProcessCompleted(e,r):o.serviceProcessFailed(e)}).catch(function(e){o.serviceProcessFailed({error:e})})}},{key:"serviceProcessCompleted",value:function(e,t){e=p.transformResult(e),t=t||1e3;var n=this;if(e)var r=setInterval(function(){I.get(n._processUrl(e.newResourceLocation),{_t:(new Date).getTime()}).then(function(e){return e.json()}).then(function(e){n.events.triggerEvent("processRunning",{id:e.id,state:e.state}),"LOST"!==e.state.runState&&"KILLED"!==e.state.runState&&"FAILED"!==e.state.runState||(clearInterval(r),n.events.triggerEvent("processFailed",{error:e.state.errorMsg,state:e.state.runState})),"FINISHED"===e.state.runState&&e.setting.serviceInfo&&(clearInterval(r),n.events.triggerEvent("processCompleted",{result:e}))}).catch(function(e){clearInterval(r),n.events.triggerEvent("processFailed",{error:e})})},t)}},{key:"serviceProcessFailed",value:function(e){ut(ft(i.prototype),"serviceProcessFailed",this).call(this,e)}},{key:"_processUrl",value:function(e){return P.getToken(e)&&(e=p.urlAppend(e,"token="+P.getToken(e))),e}}])&&at(t.prototype,n),r&&at(t,r),i}();function ht(e){"@babel/helpers - typeof";return(ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function dt(e,t,n){return(dt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Et(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function vt(e,t){return(vt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function mt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Et(e);if(t){var o=Et(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===ht(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Et(e){return(Et=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.ProcessingServiceBase=pt;var gt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vt(e,t)}(i,pt);var t,n,r,o=mt(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).url=p.urlPathAppend(n.url,"spatialanalyst/density"),n.CLASS_NAME="SuperMap.KernelDensityJobsService",n}return t=i,(n=[{key:"destroy",value:function(){dt(Et(i.prototype),"destroy",this).call(this)}},{key:"getKernelDensityJobs",value:function(){dt(Et(i.prototype),"getJobs",this).call(this,this.url)}},{key:"getKernelDensityJob",value:function(e){dt(Et(i.prototype),"getJobs",this).call(this,p.urlPathAppend(this.url,e))}},{key:"addKernelDensityJob",value:function(e,t){dt(Et(i.prototype),"addJob",this).call(this,this.url,e,Q,t)}}])&&yt(t.prototype,n),r&&yt(t,r),i}();function bt(e){"@babel/helpers - typeof";return(bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function St(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Tt(e,t,n){return(Tt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_t(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Ot(e,t){return(Ot=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Rt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=_t(e);if(t){var o=_t(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===bt(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function _t(e){return(_t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.KernelDensityJobsService=gt;var It=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ot(e,t)}(i,pt);var t,n,r,o=Rt(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).url=p.urlPathAppend(n.url,"spatialanalyst/query"),n.CLASS_NAME="SuperMap.SingleObjectQueryJobsService",n}return t=i,(n=[{key:"destroy",value:function(){Tt(_t(i.prototype),"destroy",this).call(this)}},{key:"getQueryJobs",value:function(){Tt(_t(i.prototype),"getJobs",this).call(this,this.url)}},{key:"getQueryJob",value:function(e){Tt(_t(i.prototype),"getJobs",this).call(this,p.urlPathAppend(this.url,e))}},{key:"addQueryJob",value:function(e,t){Tt(_t(i.prototype),"addJob",this).call(this,this.url,e,z,t)}}])&&St(t.prototype,n),r&&St(t,r),i}();function Nt(e){"@babel/helpers - typeof";return(Nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wt(e,t,n){return(wt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Lt(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Ct(e,t){return(Ct=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function At(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Lt(e);if(t){var o=Lt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Nt(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Lt(e){return(Lt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.SingleObjectQueryJobsService=It;var Mt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ct(e,t)}(i,pt);var t,n,r,o=At(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).url=p.urlPathAppend(n.url,"spatialanalyst/aggregatepoints"),n.CLASS_NAME="SuperMap.SummaryMeshJobsService",n}return t=i,(n=[{key:"destroy",value:function(){wt(Lt(i.prototype),"destroy",this).call(this)}},{key:"getSummaryMeshJobs",value:function(){wt(Lt(i.prototype),"getJobs",this).call(this,this.url)}},{key:"getSummaryMeshJob",value:function(e){wt(Lt(i.prototype),"getJobs",this).call(this,p.urlPathAppend(this.url,e))}},{key:"addSummaryMeshJob",value:function(e,t){wt(Lt(i.prototype),"addJob",this).call(this,this.url,e,te,t)}}])&&Pt(t.prototype,n),r&&Pt(t,r),i}();function kt(e){"@babel/helpers - typeof";return(kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Dt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xt(e,t,n){return(xt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ft(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Ut(e,t){return(Ut=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function jt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Ft(e);if(t){var o=Ft(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===kt(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Ft(e){return(Ft=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.SummaryMeshJobsService=Mt;var Jt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ut(e,t)}(i,pt);var t,n,r,o=jt(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).url=p.urlPathAppend(n.url,"spatialanalyst/summaryregion"),n.CLASS_NAME="SuperMap.SummaryRegionJobsService",n}return t=i,(n=[{key:"destroy",value:function(){xt(Ft(i.prototype),"destroy",this).call(this)}},{key:"getSummaryRegionJobs",value:function(){xt(Ft(i.prototype),"getJobs",this).call(this,this.url)}},{key:"getSummaryRegionJob",value:function(e){xt(Ft(i.prototype),"getJobs",this).call(this,p.urlPathAppend(this.url,e))}},{key:"addSummaryRegionJob",value:function(e,t){xt(Ft(i.prototype),"addJob",this).call(this,this.url,e,re,t)}}])&&Dt(t.prototype,n),r&&Dt(t,r),i}();function Ht(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.SummaryRegionJobsService=Jt;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Bt=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.datasetName="",this.datasetVectorClip="",this.geometryClip="",this.mode=x.CLIP,this.output=null,this.mappingParameters=null,p.extend(this,t),this.CLASS_NAME="SuperMap.VectorClipJobsParameter"}var t,n,r;return t=e,r=[{key:"toObject",value:function(e,t){for(var n in e)"datasetName"!==n?"output"!==n?(t.analyst=t.analyst||{},t.analyst[n]=e[n],"mappingParameters"===n&&(t.analyst[n]=t.analyst[n]||{},t.analyst.mappingParameters=e[n])):(t.output=t.output||{},t.output=e[n]):(t.input=t.input||{},t.input[n]=e[n])}}],(n=[{key:"destroy",value:function(){this.datasetName=null,this.datasetVectorClip=null,this.geometryClip=null,this.mode=null,this.output instanceof K&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof W&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&Ht(t.prototype,n),r&&Ht(t,r),e}();function Gt(e){"@babel/helpers - typeof";return(Gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Kt(e,t,n){return(Kt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=qt(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Yt(e,t){return(Yt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Wt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=qt(e);if(t){var o=qt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Gt(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function qt(e){return(qt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.VectorClipJobsParameter=Bt;var Qt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yt(e,t)}(i,pt);var t,n,r,o=Wt(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).url=p.urlPathAppend(n.url,"spatialanalyst/vectorclip"),n.CLASS_NAME="SuperMap.VectorClipJobsService",n}return t=i,(n=[{key:"destroy",value:function(){Kt(qt(i.prototype),"destroy",this).call(this)}},{key:"getVectorClipJobs",value:function(){Kt(qt(i.prototype),"getJobs",this).call(this,this.url)}},{key:"getVectorClipJob",value:function(e){Kt(qt(i.prototype),"getJobs",this).call(this,p.urlPathAppend(this.url,e))}},{key:"addVectorClipJob",value:function(e,t){Kt(qt(i.prototype),"addJob",this).call(this,this.url,e,Bt,t)}}])&&Vt(t.prototype,n),r&&Vt(t,r),i}();function Xt(e){"@babel/helpers - typeof";return(Xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Zt(e,t,n){return(Zt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=tn(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function $t(e,t){return($t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function en(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=tn(e);if(t){var o=tn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Xt(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function tn(e){return(tn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.VectorClipJobsService=Qt;var nn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$t(e,t)}(i,pt);var t,n,r,o=en(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).url=p.urlPathAppend(n.url,"spatialanalyst/overlay"),n.CLASS_NAME="SuperMap.OverlayGeoJobsService",n}return t=i,(n=[{key:"destroy",value:function(){Zt(tn(i.prototype),"destroy",this).call(this)}},{key:"getOverlayGeoJobs",value:function(){Zt(tn(i.prototype),"getJobs",this).call(this,this.url)}},{key:"getOverlayGeoJob",value:function(e){Zt(tn(i.prototype),"getJobs",this).call(this,p.urlPathAppend(this.url,e))}},{key:"addOverlayGeoJob",value:function(e,t){Zt(tn(i.prototype),"addJob",this).call(this,this.url,e,ie,t)}}])&&zt(t.prototype,n),r&&zt(t,r),i}();function rn(e){"@babel/helpers - typeof";return(rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function on(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sn(e,t,n){return(sn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ln(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function an(e,t){return(an=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function un(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=ln(e);if(t){var o=ln(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===rn(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function ln(e){return(ln=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.OverlayGeoJobsService=nn;var cn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&an(e,t)}(i,pt);var t,n,r,o=un(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).url=p.urlPathAppend(n.url,"spatialanalyst/buffers"),n.CLASS_NAME="SuperMap.BuffersAnalystJobsService",n}return t=i,(n=[{key:"destroy",value:function(){sn(ln(i.prototype),"destroy",this).call(this)}},{key:"getBuffersJobs",value:function(){sn(ln(i.prototype),"getJobs",this).call(this,this.url)}},{key:"getBuffersJob",value:function(e){sn(ln(i.prototype),"getJobs",this).call(this,p.urlPathAppend(this.url,e))}},{key:"addBuffersJob",value:function(e,t){sn(ln(i.prototype),"addJob",this).call(this,this.url,e,ae,t)}}])&&on(t.prototype,n),r&&on(t,r),i}();function fn(e){"@babel/helpers - typeof";return(fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hn(e,t,n){return(hn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=vn(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function yn(e,t){return(yn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function dn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=vn(e);if(t){var o=vn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===fn(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function vn(e){return(vn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.BuffersAnalystJobsService=cn;var mn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yn(e,t)}(i,pt);var t,n,r,o=dn(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).url=p.urlPathAppend(n.url,"spatialanalyst/topologyvalidator"),n.CLASS_NAME="SuperMap.TopologyValidatorJobsService",n}return t=i,(n=[{key:"destroy",value:function(){hn(vn(i.prototype),"destroy",this).call(this)}},{key:"getTopologyValidatorJobs",value:function(){hn(vn(i.prototype),"getJobs",this).call(this,this.url)}},{key:"getTopologyValidatorJob",value:function(e){hn(vn(i.prototype),"getJobs",this).call(this,p.urlPathAppend(this.url,e))}},{key:"addTopologyValidatorJob",value:function(e,t){hn(vn(i.prototype),"addJob",this).call(this,this.url,e,le,t)}}])&&pn(t.prototype,n),r&&pn(t,r),i}();function En(e){"@babel/helpers - typeof";return(En="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bn(e,t,n){return(bn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=On(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Sn(e,t){return(Sn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Tn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=On(e);if(t){var o=On(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===En(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function On(e){return(On=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.TopologyValidatorJobsService=mn;var Rn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Sn(e,t)}(i,pt);var t,n,r,o=Tn(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).url=p.urlPathAppend(n.url,"spatialanalyst/summaryattributes"),n.CLASS_NAME="SuperMap.SummaryAttributesJobsService",n}return t=i,(n=[{key:"destroy",value:function(){bn(On(i.prototype),"destroy",this).call(this)}},{key:"getSummaryAttributesJobs",value:function(){bn(On(i.prototype),"getJobs",this).call(this,this.url)}},{key:"getSummaryAttributesJob",value:function(e){bn(On(i.prototype),"getJobs",this).call(this,p.urlPathAppend(this.url,e))}},{key:"addSummaryAttributesJob",value:function(e,t){bn(On(i.prototype),"addJob",this).call(this,this.url,e,$,t)}}])&&gn(t.prototype,n),r&&gn(t,r),i}();function _n(e){"@babel/helpers - typeof";return(_n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function In(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Nn(e,t){return(Nn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Pn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=wn(e);if(t){var o=wn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===_n(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function wn(e){return(wn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.SummaryAttributesJobsService=Rn;var Cn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Nn(e,t)}(i,Ye);var t,n,r,o=Pn(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).kernelDensityJobs={},n.summaryMeshJobs={},n.queryJobs={},n.summaryRegionJobs={},n.vectorClipJobs={},n.overlayGeoJobs={},n.buffersJobs={},n.topologyValidatorJobs={},n.summaryAttributesJobs={},n}return t=i,(n=[{key:"getKernelDensityJobs",value:function(e,t){var n=this,r=n._processFormat(t);new gt(n.url,{headers:n.headers,proxy:n.proxy,withCredentials:n.withCredentials,crossOrigin:n.crossOrigin,serverType:n.serverType,eventListeners:{scope:n,processCompleted:e,processFailed:e},format:r}).getKernelDensityJobs()}},{key:"getKernelDensityJob",value:function(e,t,n){var r=this,o=r._processFormat(n);new gt(r.url,{headers:r.headers,proxy:r.proxy,withCredentials:r.withCredentials,crossOrigin:r.crossOrigin,serverType:r.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:o}).getKernelDensityJob(e)}},{key:"addKernelDensityJob",value:function(e,t,n,r){var o=this,i=o._processFormat(r);new gt(o.url,{headers:o.headers,proxy:o.proxy,withCredentials:o.withCredentials,crossOrigin:o.crossOrigin,eventListeners:{scope:o,processCompleted:t,processFailed:t,processRunning:function(e){o.kernelDensityJobs[e.id]=e.state}},format:i}).addKernelDensityJob(e,n)}},{key:"getKernelDensityJobState",value:function(e){return this.kernelDensityJobs[e]}},{key:"getSummaryMeshJobs",value:function(e,t){var n=this,r=n._processFormat(t);new Mt(n.url,{headers:n.headers,proxy:n.proxy,withCredentials:n.withCredentials,crossOrigin:n.crossOrigin,serverType:n.serverType,eventListeners:{scope:n,processCompleted:e,processFailed:e},format:r}).getSummaryMeshJobs()}},{key:"getSummaryMeshJob",value:function(e,t,n){var r=this,o=r._processFormat(n);new Mt(r.url,{headers:r.headers,proxy:r.proxy,withCredentials:r.withCredentials,crossOrigin:r.crossOrigin,serverType:r.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:o}).getSummaryMeshJob(e)}},{key:"addSummaryMeshJob",value:function(e,t,n,r){var o=this,i=o._processFormat(r);new Mt(o.url,{headers:o.headers,proxy:o.proxy,withCredentials:o.withCredentials,crossOrigin:o.crossOrigin,eventListeners:{scope:o,processCompleted:t,processFailed:t,processRunning:function(e){o.summaryMeshJobs[e.id]=e.state}},format:i}).addSummaryMeshJob(e,n)}},{key:"getSummaryMeshJobState",value:function(e){return this.summaryMeshJobs[e]}},{key:"getQueryJobs",value:function(e,t){var n=this,r=n._processFormat(t);new It(n.url,{headers:n.headers,proxy:n.proxy,withCredentials:n.withCredentials,crossOrigin:n.crossOrigin,serverType:n.serverType,eventListeners:{scope:n,processCompleted:e,processFailed:e},format:r}).getQueryJobs()}},{key:"getQueryJob",value:function(e,t,n){var r=this,o=r._processFormat(n);new It(r.url,{headers:r.headers,proxy:r.proxy,withCredentials:r.withCredentials,crossOrigin:r.crossOrigin,serverType:r.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:o}).getQueryJob(e)}},{key:"addQueryJob",value:function(e,t,n,r){var o=this,i=o._processParams(e),s=o._processFormat(r);new It(o.url,{headers:o.headers,proxy:o.proxy,withCredentials:o.withCredentials,crossOrigin:o.crossOrigin,eventListeners:{scope:o,processCompleted:t,processFailed:t,processRunning:function(e){o.queryJobs[e.id]=e.state}},format:s}).addQueryJob(i,n)}},{key:"getQueryJobState",value:function(e){return this.queryJobs[e]}},{key:"getSummaryRegionJobs",value:function(e,t){var n=this,r=n._processFormat(t);new Jt(n.url,{proxy:n.proxy,headers:n.headers,withCredentials:n.withCredentials,crossOrigin:n.crossOrigin,serverType:n.serverType,eventListeners:{scope:n,processCompleted:e,processFailed:e},format:r}).getSummaryRegionJobs()}},{key:"getSummaryRegionJob",value:function(e,t,n){var r=this,o=r._processFormat(n);new Jt(r.url,{proxy:r.proxy,withCredentials:r.withCredentials,crossOrigin:r.crossOrigin,headers:r.headers,serverType:r.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:o}).getSummaryRegionJob(e)}},{key:"addSummaryRegionJob",value:function(e,t,n,r){var o=this,i=o._processFormat(r);new Jt(o.url,{proxy:o.proxy,withCredentials:o.withCredentials,crossOrigin:o.crossOrigin,headers:o.headers,eventListeners:{scope:o,processCompleted:t,processFailed:t,processRunning:function(e){o.summaryRegionJobs[e.id]=e.state}},format:i}).addSummaryRegionJob(e,n)}},{key:"getSummaryRegionJobState",value:function(e){return this.summaryRegionJobs[e]}},{key:"getVectorClipJobs",value:function(e,t){var n=this,r=n._processFormat(t);new Qt(n.url,{proxy:n.proxy,withCredentials:n.withCredentials,crossOrigin:n.crossOrigin,headers:n.headers,serverType:n.serverType,eventListeners:{scope:n,processCompleted:e,processFailed:e},format:r}).getVectorClipJobs()}},{key:"getVectorClipJob",value:function(e,t,n){var r=this,o=r._processFormat(n);new Qt(r.url,{proxy:r.proxy,withCredentials:r.withCredentials,crossOrigin:r.crossOrigin,headers:r.headers,serverType:r.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:o}).getVectorClipJob(e)}},{key:"addVectorClipJob",value:function(e,t,n,r){var o=this,i=o._processParams(e),s=o._processFormat(r);new Qt(o.url,{proxy:o.proxy,withCredentials:o.withCredentials,crossOrigin:o.crossOrigin,headers:o.headers,serverType:o.serverType,eventListeners:{scope:o,processCompleted:t,processFailed:t,processRunning:function(e){o.vectorClipJobs[e.id]=e.state}},format:s}).addVectorClipJob(i,n)}},{key:"getVectorClipJobState",value:function(e){return this.vectorClipJobs[e]}},{key:"getOverlayGeoJobs",value:function(e,t){var n=this,r=n._processFormat(t);new nn(n.url,{proxy:n.proxy,withCredentials:n.withCredentials,crossOrigin:n.crossOrigin,headers:n.headers,serverType:n.serverType,eventListeners:{scope:n,processCompleted:e,processFailed:e},format:r}).getOverlayGeoJobs()}},{key:"getOverlayGeoJob",value:function(e,t,n){var r=this,o=r._processFormat(n);new nn(r.url,{proxy:r.proxy,withCredentials:r.withCredentials,crossOrigin:r.crossOrigin,headers:r.headers,serverType:r.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:o}).getOverlayGeoJob(e)}},{key:"addOverlayGeoJob",value:function(e,t,n,r){var o=this,i=o._processFormat(r);new nn(o.url,{proxy:o.proxy,withCredentials:o.withCredentials,crossOrigin:o.crossOrigin,headers:o.headers,serverType:o.serverType,eventListeners:{scope:o,processCompleted:t,processFailed:t,processRunning:function(e){o.overlayGeoJobs[e.id]=e.state}},format:i}).addOverlayGeoJob(e,n)}},{key:"getoverlayGeoJobState",value:function(e){return this.overlayGeoJobs[e]}},{key:"getBuffersJobs",value:function(e,t){var n=this,r=n._processFormat(t);new cn(n.url,{proxy:n.proxy,withCredentials:n.withCredentials,crossOrigin:n.crossOrigin,headers:n.headers,serverType:n.serverType,eventListeners:{scope:n,processCompleted:e,processFailed:e},format:r}).getBuffersJobs()}},{key:"getBuffersJob",value:function(e,t,n){var r=this,o=r._processFormat(n);new cn(r.url,{proxy:r.proxy,withCredentials:r.withCredentials,crossOrigin:r.crossOrigin,headers:r.headers,serverType:r.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:o}).getBuffersJob(e)}},{key:"addBuffersJob",value:function(e,t,n,r){var o=this,i=o._processFormat(r);new cn(o.url,{proxy:o.proxy,withCredentials:o.withCredentials,crossOrigin:o.crossOrigin,headers:o.headers,serverType:o.serverType,eventListeners:{scope:o,processCompleted:t,processFailed:t,processRunning:function(e){o.buffersJobs[e.id]=e.state}},format:i}).addBuffersJob(e,n)}},{key:"getBuffersJobState",value:function(e){return this.buffersJobs[e]}},{key:"getTopologyValidatorJobs",value:function(e,t){var n=this,r=n._processFormat(t);new mn(n.url,{proxy:n.proxy,withCredentials:n.withCredentials,crossOrigin:n.crossOrigin,headers:n.headers,serverType:n.serverType,eventListeners:{scope:n,processCompleted:e,processFailed:e},format:r}).getTopologyValidatorJobs()}},{key:"getTopologyValidatorJob",value:function(e,t,n){var r=this,o=r._processFormat(n);new mn(r.url,{proxy:r.proxy,withCredentials:r.withCredentials,crossOrigin:r.crossOrigin,headers:r.headers,serverType:r.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:o}).getTopologyValidatorJob(e)}},{key:"addTopologyValidatorJob",value:function(e,t,n,r){var o=this,i=o._processFormat(r);new mn(o.url,{proxy:o.proxy,withCredentials:o.withCredentials,crossOrigin:o.crossOrigin,headers:o.headers,serverType:o.serverType,eventListeners:{scope:o,processCompleted:t,processFailed:t,processRunning:function(e){o.topologyValidatorJobs[e.id]=e.state}},format:i}).addTopologyValidatorJob(e,n)}},{key:"getTopologyValidatorJobState",value:function(e){return this.topologyValidatorJobs[e]}},{key:"getSummaryAttributesJobs",value:function(e,t){var n=this,r=n._processFormat(t);new Rn(n.url,{proxy:n.proxy,withCredentials:n.withCredentials,crossOrigin:n.crossOrigin,headers:n.headers,serverType:n.serverType,eventListeners:{scope:n,processCompleted:e,processFailed:e},format:r}).getSummaryAttributesJobs()}},{key:"getSummaryAttributesJob",value:function(e,t,n){var r=this,o=r._processFormat(n);new Rn(r.url,{proxy:r.proxy,withCredentials:r.withCredentials,crossOrigin:r.crossOrigin,headers:r.headers,serverType:r.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:o}).getSummaryAttributesJob(e)}},{key:"addSummaryAttributesJob",value:function(e,t,n,r){var o=this,i=o._processFormat(r);new Rn(o.url,{proxy:o.proxy,withCredentials:o.withCredentials,crossOrigin:o.crossOrigin,headers:o.headers,serverType:o.serverType,eventListeners:{scope:o,processCompleted:t,processFailed:t,processRunning:function(e){o.summaryAttributesJobs[e.id]=e.state}},format:i}).addSummaryAttributesJob(e,n)}},{key:"getSummaryAttributesJobState",value:function(e){return this.summaryAttributesJobs[e]}},{key:"_processFormat",value:function(e){return e||w.GEOJSON}},{key:"_processParams",value:function(e){return e?(e.geometryQuery&&(e.geometryQuery=this._convertPatams(e.geometryQuery)),e.geometryClip&&(e.geometryClip=this._convertPatams(e.geometryClip)),e):{}}},{key:"_convertPatams",value:function(e){var t={};if(e.length<1)t="";else{for(var n=[],r=0;r<e.length;r++){var o={};o.x=e[r].x,o.y=e[r].y,n.push(o)}t.type="REGION",t.points=n}return t}}])&&In(t.prototype,n),r&&In(t,r),i}();ye.REST.ProcessingService=Cn}]);